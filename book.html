<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.15">
<title>NoteBook</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1>NoteBook</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_c">C++</a></li>
<li><a href="#_c常见知识点总结">C++常见知识点总结</a>
<ul class="sectlevel2">
<li><a href="#_关键字作用解释">关键字作用解释</a></li>
<li><a href="#_1_某文件中定义的静态全局变量静态外部变量函数外部定义其作用域是">1. 某文件中定义的静态全局变量(静态外部变量(函数外部定义))其作用域是？</a></li>
<li><a href="#_2_通常使用_plusplus来判断一段程序是使用c编译器编译的还是使用c编译器编译的">2. 通常使用__plusplus来判断一段程序是使用C++编译器编译的还是使用C编译器编译的</a></li>
<li><a href="#_3_c函数中值的传递方式有哪几种以及相互之间的区别">3. C++函数中值的传递方式有哪几种，以及相互之间的区别</a></li>
<li><a href="#_4_new在c中是">4. new在C++中是？</a></li>
<li><a href="#_5_多态的作用以及产生条件">5. 多态的作用以及产生条件</a></li>
<li><a href="#_6_多态类的虚函数表是compile_time还是run_time时建立的">6. 多态类的虚函数表是Compile-Time，还是Run-Time时建立的？</a></li>
<li><a href="#_7_面向对象的三个基本特征并简单叙述">7. 面向对象的三个基本特征，并简单叙述</a></li>
<li><a href="#_9_内存分配的方式有几种">9. 内存分配的方式有几种？</a></li>
<li><a href="#_10_引用和指针有什么区别">10. 引用和指针有什么区别？</a></li>
<li><a href="#_11_c是不是类型安全的">11. C++是不是类型安全的？</a></li>
<li><a href="#_12_volatile作用">12. volatile作用</a></li>
<li><a href="#_13_static关键字的作用">13. static关键字的作用</a></li>
<li><a href="#_14_const含义及其实现机制">14. const含义及其实现机制</a></li>
<li><a href="#_15_extern关键字">15. extern关键字</a></li>
<li><a href="#_16_宏定义和内联函数的区别">16. 宏定义和内联函数的区别</a></li>
<li><a href="#_stl原理及实现">STL原理及实现</a></li>
<li><a href="#_虚函数">虚函数</a></li>
<li><a href="#_设计一个不能被继承的类">设计一个不能被继承的类</a></li>
<li><a href="#_内存分配">内存分配</a></li>
<li><a href="#_指针问题">指针问题</a></li>
<li><a href="#_重载和重写的区别">重载和重写的区别</a></li>
<li><a href="#_重载重写和重定义">重载、重写和重定义</a></li>
</ul>
</li>
<li><a href="#_placement_new">placement new</a></li>
<li><a href="#_常用编程语句">常用编程语句</a>
<ul class="sectlevel2">
<li><a href="#_位操作">位操作</a></li>
</ul>
</li>
<li><a href="#_网络">网络</a></li>
<li><a href="#_tcpdump">tcpdump</a>
<ul class="sectlevel2">
<li><a href="#_认识tcpdump">认识tcpdump</a></li>
</ul>
</li>
<li><a href="#_http">HTTP</a></li>
<li><a href="#_分布式">分布式</a></li>
<li><a href="#_linux">Linux</a></li>
<li><a href="#_linux二进制分析">Linux二进制分析</a></li>
<li><a href="#_linux环境和相关工具">Linux环境和相关工具</a>
<ul class="sectlevel2">
<li><a href="#_linux工具">Linux工具</a></li>
<li><a href="#_设备和文件">设备和文件</a></li>
<li><a href="#_连接器相关环境指针">连接器相关环境指针</a></li>
</ul>
</li>
<li><a href="#_elf二进制格式">ELF二进制格式</a>
<ul class="sectlevel2">
<li><a href="#_elf文件类型">ELF文件类型</a></li>
<li><a href="#_elf程序头">ELF程序头</a></li>
<li><a href="#_elf节头">ELF节头</a></li>
<li><a href="#_段的布局">段的布局</a></li>
<li><a href="#_elf符号">ELF符号</a></li>
<li><a href="#_elf_sym_符号表结构">Elf*_Sym 符号表结构</a></li>
<li><a href="#_ftrace的使用">ftrace的使用</a></li>
<li><a href="#_elf重定位">ELF重定位</a></li>
<li><a href="#_elf动态链接">ELF动态链接</a></li>
<li><a href="#_实现elf解析器">实现ELF解析器</a></li>
</ul>
</li>
<li><a href="#_linux进程追踪">Linux进程追踪</a>
<ul class="sectlevel2">
<li><a href="#_ptrace的重要性">ptrace的重要性</a></li>
<li><a href="#_ptrace_的请求">ptrace 的请求</a></li>
<li><a href="#_进程寄存器状态和标记">进程寄存器状态和标记</a></li>
<li><a href="#_基于ptrace的调试器">基于ptrace的调试器</a></li>
<li><a href="#_内存感染类型">内存感染类型</a></li>
</ul>
</li>
<li><a href="#_elf病毒技术_linuxsllunix技术">ELF病毒技术-(LinuxSll/Unix技术)</a></li>
<li><a href="#_linux二进制保护">Linux二进制保护</a></li>
<li><a href="#_认识可执行程序">认识可执行程序</a>
<ul class="sectlevel2">
<li><a href="#_pie_no_pie">-pie &amp;&amp; -no-pie</a></li>
</ul>
</li>
<li><a href="#_utils">utils</a></li>
<li><a href="#_asciidocumentation">AsciiDocumentation</a>
<ul class="sectlevel2">
<li><a href="#_文档头">文档头</a></li>
<li><a href="#_标题">标题</a></li>
<li><a href="#_段落">段落</a></li>
<li><a href="#_块结构">块结构</a></li>
<li><a href="#_列表">列表</a></li>
<li><a href="#_文本格式">文本格式</a></li>
<li><a href="#_表格">表格</a></li>
<li><a href="#_图表">图表</a></li>
<li><a href="#_属性">属性</a></li>
</ul>
</li>
<li><a href="#_操作系统">操作系统</a>
<ul class="sectlevel2">
<li><a href="#_系统知识">系统知识</a></li>
<li><a href="#_文件io">文件IO</a></li>
<li><a href="#_进程间通信">进程间通信</a></li>
<li><a href="#_线程间同步">线程间同步</a></li>
<li><a href="#_守护进程">守护进程</a></li>
<li><a href="#_内存管理">内存管理</a></li>
<li><a href="#_信号">信号</a></li>
<li><a href="#_在线编译工具">在线编译工具</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Author : Achou.Wang &lt;<a href="mailto:564631192@qq.com">564631192@qq.com</a>&gt;</p>
</div>
<div class="paragraph">
<p>Wechat official account : 码上有话</p>
</div>
<div class="paragraph">
<p>v0.1, 2022-6-7</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_c">C++</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_c常见知识点总结">C++常见知识点总结</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_关键字作用解释">关键字作用解释</h3>

</div>
<div class="sect2">
<h3 id="_1_某文件中定义的静态全局变量静态外部变量函数外部定义其作用域是">1. 某文件中定义的静态全局变量(静态外部变量(函数外部定义))其作用域是？</h3>
<div class="paragraph">
<p>本文件，静态全局变量限制了其作用域，导致该变量只能在其所在的源文件有效。正是因为作用域局限于一个源文件内，因此可以避免其他源文件中同名变量引起的错误。如果当前源文件已经有同名静态变量，会优先使用静态变量。</p>
</div>
</div>
<div class="sect2">
<h3 id="_2_通常使用_plusplus来判断一段程序是使用c编译器编译的还是使用c编译器编译的">2. 通常使用__plusplus来判断一段程序是使用C++编译器编译的还是使用C编译器编译的</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#579">#ifdef</span> __cplusplus
<span style="color:#777">// C++</span>
<span style="color:#579">#else</span>
<span style="color:#777">//C</span>
<span style="color:#579">#endif</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_3_c函数中值的传递方式有哪几种以及相互之间的区别">3. C++函数中值的传递方式有哪几种，以及相互之间的区别</h3>
<div class="paragraph">
<p>C++函数有三种传递方式：值传递、指针传递和引用传递
- 指针有自己的内存空间，引用知识一个别名
- sizeof计算指针的大小为4,而引用的大小为对象的大小
- 可以用 const指针但是不能有 const引用</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#0a8;font-weight:bold">int</span> * <span style="color:#088;font-weight:bold">const</span> data = &amp;dataSize;   <span style="color:#777">// 可以有const指针</span>
<span style="color:#0a8;font-weight:bold">int</span> &amp; <span style="color:#088;font-weight:bold">const</span> data = dataSize;    <span style="color:#777">// 但是引用不能是const的， 但是别名可以定义成const，其实这一切都是因为引用只是值得别名</span>
<span style="color:#088;font-weight:bold">const</span> &amp; <span style="color:#0a8;font-weight:bold">int</span> data = dataSize;   <span style="color:#777">// 引用的别名是可以定义为const的</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>指针可以被初始化为
nullptr，但是引用必须被初始化，且必须是一个已有对象的引用</p>
</li>
<li>
<p>指针可以一有多级指针(**p)，而引用只能有一级</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_4_new在c中是">4. new在C++中是？</h3>
<div class="paragraph">
<p>关键字和运算符，
malloc是库函数，不在编译器控制范围之内；
new是运算符，在编译器控制范围之内；调用
malloc时，从堆中申请内存；调用
new时，从堆中申请内存并为内存调用构造函数。
C++程序执行时将内存大方向分为4个区域：
- 代码区域：存放函数体的二进制代码，由操作系统进行管理的
- 全局区：存放全局变量和静态变量以及常量
- 栈区：由编译器自动分配释放，存放函数的参数值，局部变量等
- 堆区：由程序员分配和释放，若程序员不释放程序结束时由操作系统回收</p>
</div>
</div>
<div class="sect2">
<h3 id="_5_多态的作用以及产生条件">5. 多态的作用以及产生条件</h3>
<div class="paragraph">
<p>多态是指不同的子类在继承父类后分别都重写覆盖了父类的方法，即父类同一个方法，在继承的子类中表现出不同的形式。因此可以实现调用同一函数能产生不同的行为
产生条件：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>调用函数的对象必须是指针或者引用</p>
</li>
<li>
<p>被调用的函数必须是虚函数，且完成了虚函数的重写</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>作用：
 1. 隐藏实现细节，使得代码能够模块化；扩展代码模块，实现代码重用
 2. 接口重用</p>
</div>
</div>
<div class="sect2">
<h3 id="_6_多态类的虚函数表是compile_time还是run_time时建立的">6. 多态类的虚函数表是Compile-Time，还是Run-Time时建立的？</h3>
<div class="paragraph">
<p>虚函数在编译期间就建立了，各个虚函数在编译时组织成一个虚函数地址数组，而对象的隐藏成员-虚函数表指针是在运行期间，也就是构造函数被调用时进行初始化的，这是实现多态的关键</p>
</div>
</div>
<div class="sect2">
<h3 id="_7_面向对象的三个基本特征并简单叙述">7. 面向对象的三个基本特征，并简单叙述</h3>
<div class="ulist">
<ul>
<li>
<p>封装，将客观事物抽象成类，每个类对自身的数据和方法实行protection(private, protected, public)</p>
</li>
<li>
<p>广义的继承有三种实现形式：实现继承(指使用基类的属性和方法而无需额外的编码能力)、可视继承(子窗体使用父窗体的外观和实现代码)、接口继承(仅使用属性和方法，实现滞后子类实现)。前两种(类继承)和后一种(接口继承)构成了功能复用的两种方式。</p>
</li>
<li>
<p>多态：允许将子类类型的指针赋值给父类类型的指针(使用父类类型引用子类对象)</p>
</li>
<li>
<p>main函数执行之前还会执行什么代码？
全局对象的构造函数会在main函数执行之前执行</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#088;font-weight:bold">using</span> <span style="color:#080;font-weight:bold">namespace</span> std;

 <span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">B</span> {
 <span style="color:#088;font-weight:bold">public</span>:
     B() {
         cout &lt;&lt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Construct B </span><span style="color:#710">&quot;</span></span> &lt;&lt; endl;
     }
 };

 B b;

 <span style="color:#0a8;font-weight:bold">int</span> main(<span style="color:#0a8;font-weight:bold">int</span> argc, <span style="color:#0a8;font-weight:bold">char</span>* argv[]) {
     cout &lt;&lt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">main Run</span><span style="color:#710">&quot;</span></span> &lt;&lt; endl;
     <span style="color:#080;font-weight:bold">return</span> <span style="color:#00D">0</span>;
 }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_9_内存分配的方式有几种">9. 内存分配的方式有几种？</h3>
<div class="ulist">
<ul>
<li>
<p>静态存储区域分配，内存在程序编译的时候就已经分配好了，这块内存在程序的整个运行期间都存在。例如全局变量，静态局部变量。</p>
</li>
<li>
<p>在栈上创建，在执行函数时，函数局部变量的存储单元可以在栈上创建，函数执行结束时这些存储单元自动被释放。栈内存分配运算内值于处理器的指令集中，效率很高但是分配的内存容量有限-普通的局部变量。</p>
</li>
<li>
<p>从堆上分配，也称为动态内存分配。程序在运行的时候采用malloc或new申请任意多少内存，程序员自己负责在任何时候free或delete释放内存。动态内存的生存期由我们决定，使用非常灵活但是问题最多</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_10_引用和指针有什么区别">10. 引用和指针有什么区别？</h3>
<div class="ulist">
<ul>
<li>
<p>引用必须被初始化，指针不必</p>
</li>
<li>
<p>引用初始化后不能被改变，指针可以改变所指的对象</p>
</li>
<li>
<p>不存在指向空值的引用，但是存在指向空值的指针</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_11_c是不是类型安全的">11. C++是不是类型安全的？</h3>
<div class="paragraph">
<p>不是， 类型的指针可以强制转换类型，类型之间也是可以强制转换</p>
</div>
</div>
<div class="sect2">
<h3 id="_12_volatile作用">12. volatile作用</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>volatile关键词的第一个特性：易变性。所谓的易变性，在汇编层面反应出来，就是两条语句，下一条语句不会直接使用上一条语句对应的volatile变量的寄存器内容，而是重新从内存中读取。</p>
</li>
<li>
<p>volatile关键词的第二个特性：不可优化特性，volatile告诉编译器不要对我这个变量进行各种激进的优化，甚至将变量直接消除，保证程序员写在代码中的指令一定会被执行。</p>
</li>
<li>
<p>volatile关键词第三个特性：顺序性。能够保证volatile变量间的顺序行，编译器不会进行乱序优化。
但是当volatile变量于非volatile变量之间进行操作时，是有可能被编译器交换顺序的。只是volatile变量之间进行操作不会被编译器交换顺序。哪怕你把所有的变量都声明成volatile变量，哪怕你杜绝编译器的乱序优化，这也只能够保证生成的汇编代码不是乱序的，CPU仍然可能进行乱序执行指令，导致程序依赖的逻辑出错，volatile对此是无能为力的。这个时候要想保证内存交换的顺序就要使用到内存屏障技术了，具体的实现可以参考： C++内存模型和原子类型操作</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_13_static关键字的作用">13. static关键字的作用</h3>
<div class="paragraph">
<p>static无论在C还是在C++语言里面都可以永爱控制存储方式和可见性</p>
</div>
<div class="ulist">
<ul>
<li>
<p>修饰局部变量:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>一般情况下局部变量都是放到栈上的，在语句块结束的时候变量的生命周期也就结束了。但是如果给局部变量添加上static进行修饰的话，该变量便存放到了静态数据区域，其生命周期一直会延续到整个程序结束。需要注意一点的是，使用static声明的局部变量只是改变了声明周期，其作用域还是局部的，只是在该语句块中可见，作用域也仅限于该语句块。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>修饰全局变量</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>全局变量可以通过extern在整个工程中可见，但是经过static修饰过的全局变量就只能本源文件中可见</p>
</div>
<div class="ulist">
<ul>
<li>
<p>修饰函数</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>static修饰的函数(C语言中)，情况和修饰全局变量大同小异，就是改变了函数的作用域
- C中的static
如果使用static修饰C类中的函数，则说明该函数不属于该类的任何特定对象；如果对类中某个变量进行修饰，表示该变量为类以及其所有的对象所有。它们在存储空间中都只存在一个副本，可以通过类或者对象去调用。</p>
</div>
</div>
<div class="sect2">
<h3 id="_14_const含义及其实现机制">14. const含义及其实现机制</h3>
<div class="paragraph">
<p>const可以用来限定特定变量，以通知编译器该变量不可被修改。要习惯使用const，这样可以避免在函数中修改某些不应该修改的变量。
const的在不同场景的中的表现有些不同。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>const修饰基本数据类型</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>const修饰常量或者数组，基本数据类型，const放到类型说明符前后效果一样，都是告诉编译器这些值不能修改</p>
</li>
<li>
<p>const修饰指针或者引用变量，如果const位于指针的左侧，则const就是用来修饰指针指向的变量，如果const位于指针的右侧，则const就是用来修饰指针，即指针本身是常量。引用同理</p>
</li>
</ol>
</div>
</li>
<li>
<p>作为函数返回值的const修饰符</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>修饰参数的const修饰符，调用函数时用相应变量初始化常量参数，按照const修饰的部分进行常量化，保护了原对象的属性，常用于指针或者引用的情况</p>
</li>
<li>
<p>修饰函数返回值，声明为函数返回值为const之后const可以对返回值起到同样的保护作用，常用来返回类中不想被外部更改的变量</p>
</li>
</ol>
</div>
</li>
<li>
<p>const在类中</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>const修饰的类成员变量，只能在构造函数的初始化列表中进行初始化，const修饰的成员函数int function() const;，其意义是该函数不能修改所在类中的任何成员变量</p>
</li>
</ol>
</div>
</li>
<li>
<p>修饰类对象</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>常量对象只能调用常量函数，别的成员函数不能调用</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">memory_management.cpp</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp">    <span style="color:#088;font-weight:bold">const</span> MemoryManagement memoryManagement;
    memoryManagement.GetCount();
    <span style="color:#777">//MemoryManagement.SetCount();</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_15_extern关键字">15. extern关键字</h3>
<div class="ulist">
<ul>
<li>
<p>用来修饰变量或者函数，说明此变量或者函数是在别处定义，这里要进行引用，需要注意的是，extern有作用域，在一个函数中extern的只能在该函数中使用</p>
</li>
<li>
<p>Cextern还有另外一个作用，可以用来知识C、C的调用规范比如在C中调用C函数需要使用extern "C"声明要引用的函数，这是给连接器用的，告诉连接器，在链接的时候用C函数的规范来进行链接，这样做的主要原因是因为C编译器编译后的代码命名和C编译器编译后的命名规则不一样。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><mark>说明</mark>
extern的声明的位置和作用域相关，如果在一个函数中声明extern，那么extern声明的函数只能在该函数中使用。使用extern声明函数可以避免include引入所有的函数声明，提升编译速度</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp">uint32_t RoundUp(uint32_t x, uint32_t align) {
    <span style="color:#777">// extern有作用域在一个函数中声明extern只能在该函数中使用</span>
    <span style="color:#088;font-weight:bold">extern</span> <span style="color:#088;font-weight:bold">void</span> Externally();
    Externally();
    <span style="color:#080;font-weight:bold">return</span> (x + align - <span style="color:#00D">1</span>) &amp; ~ (align - <span style="color:#00D">1</span>);
}

<span style="color:#0a8;font-weight:bold">int</span> main(<span style="color:#0a8;font-weight:bold">int</span> argc, <span style="color:#0a8;font-weight:bold">char</span> *argv[]) {
    std::cout &lt;&lt; RoundUp(<span style="color:#00D">13</span>, <span style="color:#00D">8</span>) &lt;&lt; endl;
    <span style="color:#777">// extern也有作用域</span>
    <span style="color:#777">//Externally();</span>
    <span style="color:#080;font-weight:bold">return</span> <span style="color:#00D">0</span>;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_16_宏定义和内联函数的区别">16. 宏定义和内联函数的区别</h3>
<div class="ulist">
<ul>
<li>
<p>内联函数和宏定义类似，都是将代码插入到调用处，可以通过避免函数调用的开销来提高执行效率，编译器还能够优化调用过程。</p>
</li>
<li>
<p>不同的是宏定义不对参数、返回值等进行检查，因此使用内联函数会更加安全；</p>
</li>
<li>
<p>在处理过程上，宏定义是由预处理器进行宏替代，而内联函数时通过编译器处理来实现的，内联函数在需要调用的地方会进行展开，避免了函数压栈，减少了调用开销。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><mark>有了内联函数宏定义还有必要使用吗？</mark></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>内联不能完全替代宏，有些宏可以在当前作用域生成一些变量，内联函数做不到</p>
</li>
<li>
<p>内联函数只是函数的一种，内联只是程序员建议编译器最好把这个函数在被调用的地方展开，这样可以省去函数调用的开销(压栈、跳转、返回)等，但是编译器可以不按照程序员的建议来，如果内联函数体过大，一般的编译器就会放弃内联方式，而采用普通的方式调用函数，这样内联函数就是普通函数了。</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_stl原理及实现">STL原理及实现</h3>
<div class="paragraph">
<p>STL有六大组件，六大组件之间可以嵌套使用。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>容器(containers)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>容器主要有，vector,list,queue,deque,set,map,multimap,multiset&#8230;&#8203;，STL的容器是一种模板类</p>
</div>
<div class="ulist">
<ul>
<li>
<p>算法(algorithms)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>各种算法比如：sort,search,copy,search,erase等，STL的算法是一种模板函数</p>
</div>
<div class="ulist">
<ul>
<li>
<p>迭代器(iterators)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>迭代器扮演着容器和算法之间的胶着剂，迭代器是一种将operator*, operator&#8594;, operator++, operator&#8212;&#8203;等指针相关操作予以多元化的 class template。所有的STL容器都有自己的专属的迭代器。<mark>原生指针也是一种迭代器</mark></p>
</div>
<div class="ulist">
<ul>
<li>
<p>仿函数(functors)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>仿函数行为类似函数，可以作为算法的某种策略，仿函数是一种重载了operator()的class或者class template，一般的函数指针也可以视为简单的仿函数</p>
</div>
<div class="ulist">
<ul>
<li>
<p>适配器(adapters)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>一种用来修饰容器、仿函数、迭代器或接口的东西，例如queue或者stack，虽然看着是一种容器，但是内部完全借助deque实现，其实质上只能看做是一种容器的适配器，所有动作都有底层的deque实现。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>配置器(allocators)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>负责内存空间的配置与管理，配置器是一个实现了动态空间配置、空间管理、空间释放的class template</p>
</div>
<div class="paragraph">
<p>六大组件之间的的交互关系，容器通过配置器取得数据存储空间，算法通过迭代器获取容器中存储的内容，仿函数可以协助算法完成不同的策略，适配器修饰套接仿函数</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./image/image-2022-06-05-12-13-07-200.png" alt="STL六大组件关系图">
</div>
<div class="title">Figure 1. STL六大组件.png</div>
</div>
<div class="sect3">
<h4 id="_按照实现形式不同又可以将容器分为序列式容器和关联式容器">按照实现形式不同又可以将容器分为序列式容器和关联式容器</h4>
<div class="ulist">
<ul>
<li>
<p>序列式容器</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>vector-数组，当元素不够时会重新分配内存，copy原来数组中的元素到新分配的数组中去</p>
</li>
<li>
<p>list-单链表</p>
</li>
<li>
<p>deque-当内存不够时，deque的内存时由分配中央控制器会连接起来的一块一块的内存拼接而成，所以deque可以向前或者向后插入数据，当内存不够时会继续寻找空闲的内存块用来存储数据。</p>
</li>
<li>
<p>stack-基于deque实现</p>
</li>
<li>
<p>queue-基于deque实现</p>
</li>
<li>
<p>heap-完全二叉树，使用最大堆排序，以数组(vector)的形式存放</p>
</li>
<li>
<p>slist-双向链表</p>
</li>
</ol>
</div>
</li>
<li>
<p>关联式容器
set,map,multimap,multiset-基于红黑树实现(RB-tree)，一种加上额外平衡条件的二叉树
hash table-散列表，详见：redis内存分析
hash_map,hash_set,hash_multset,hash_multimap- 基于hash table实现</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_虚函数">虚函数</h3>
<div class="sect3">
<h4 id="_虚函数实现">虚函数实现</h4>
<div class="paragraph">
<p>C++多态分为静态多态(编译时多态)和动态多态(运行时多态)两大类，静态多态通过重载，模板来实现；动态多态是通过虚函数实现。
虚函数通过虚函数表vtbl(virtual table)和虚函数表指针vptr(virtual table pointer)来实现动态多态。当调用一个虚函数时，被执行的代码和调用函数的对象的动态类型相一致，当一个类声明了虚函数或者继承了虚函数，这个类就会有自己的vtbl，vtbl实际上就是一个函数指针数组，有的编译器用的是链表，不过方法都差不多。vtbl中每一个元素都对应一个函数指针，函数指针指向该类的一个虚函数，实际上每一个对象都会包含一个vptr，vptr指向该类的vtbl;</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">结论</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">声明虚函数之后的类，都会有自己的vtbl</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">带有虚函数类的对象会包含一个vptr，该vptr指向vtbl</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">虚函数按照其声明顺序存放于vtbl中，vtbl数组中每一个元素对应一个函数指针指向该类的虚函数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">如果子类覆盖了父类，会将子类的对象的虚函数放到原来父类虚函数的对应位置中</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">在多继承情况下，每个父类都会有自己的虚表，子类成员函数被放到了第一个父类表中</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_为什么c里访问虚函数比访问普通函数慢">为什么C++里访问虚函数比访问普通函数慢？</h4>
<div class="ulist">
<ul>
<li>
<p>单继承时，性能差不多，多了一个虚函数表查找</p>
</li>
<li>
<p>多继承的时候会慢
通过实现原理可知，虚函数的调用过程如下：</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>通过对象的vptr找到类的vtbl，这只是一个指针寻址</p>
</li>
<li>
<p>找到vtbl中函数的索引，这一步也很简单，编译器为每一个虚函数都分配了唯一索引，这步的代价也只是在vtbl数组中进行地址偏移。</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>因此在单继承中，调用虚函数所需的代价基本上和非虚函数的效率一样，在大多数计算机上只是多执行了很少的一些指令，所以一概而论的说虚函数性能不行是不科学的。
在多继承的情况下，由于继承的情况下，由于根据多个父类生成多个vptr，在对象里寻找vptr而进行的偏移量会变得复杂一些，但这些也不是虚函数的性能瓶颈。虚函数运行时的主要代价是虚函数不能进行内联，这非常好理解，因为内联是指在编译期间被调用的函数体本省来代替函数调用的指令，但是虚函数是直到运行期间才知道要调用的是哪一个函数，所以没有办法进行内联。</p>
</div>
</div>
<div class="sect3">
<h4 id="_虚函数会使得类对象占用空间增大吗">虚函数会使得类对象占用空间增大吗？</h4>
<div class="paragraph">
<p>虚函数为了实现运行期间多态，编译器会给每一个包含虚函数或继承了虚函数的类自动建立一个虚函数表，所以虚函数的一个代价就是会增加类的体积。
当类中的虚函数比较少时这些体积并不明显，如果类中有大量的虚函数你就会发现vtbl会占用大量的地址空间。但这并不是主要的代价，如果类继承过程中，子类会生成自己的vtbl，如果自理只是覆盖父类的一部分虚函数，其余部分和父类的重复，如果有大量的子类继承都只覆盖一小部分父类的虚函数的情况下，会造成大量的地址空间浪费。比如很多UI库继承父类之后往往只实现一小部分接口，这也是为什么UI库会非常的大的原因。还有就是，由于虚函数vtpr的存在，在单继承或者多继承的情况下，虚函数只会导致类多出一个vtpr指针的体积；在多继承的情况下，类的每个对象会多出N个vptr的体积。当一个类对象本身体积比价大时这些增加的体积不明显，但当一个类对象体积比较小时，这些增加的体积就非常明显了。</p>
</div>
</div>
<div class="sect3">
<h4 id="_为什么需要虚析枸函数什么时候不需要父类的析枸函数为什么需要定义为虚函数">为什么需要虚析枸函数，什么时候不需要，父类的析枸函数为什么需要定义为虚函数</h4>
<div class="paragraph">
<p>一般在析枸函数中会进行资源的释放，而析枸函数没有被调用的话就会造成内存泄露，这样是为了当用一个基类指针删除一个派生类对象时，派生类对象的析枸函数也能被调用。
因此，并不是所有类都需要定义虚析枸函数，当一个类被用作基类函数的时候，才需要把析枸函数写成虚析枸函数。</p>
</div>
</div>
<div class="sect3">
<h4 id="_内联函数构造函数静态成员函数可以是虚函数吗">内联函数、构造函数、静态成员函数可以是虚函数吗？</h4>
<div class="ulist">
<ul>
<li>
<p>内联函数是编译期间展开的，必须有实体，不能是虚函数</p>
</li>
<li>
<p>静态成员函数属于class自己的，也必须有实体，不能是虚函数</p>
</li>
<li>
<p>虚函数需要虚函数表查找才能调用，构造函数调用之前对象的虚函数表不存在，根本找不到"虚构造函数"，因此构造函数不能是虚函数，这是一个鸡生蛋蛋生鸡的问题。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>虚函数表现多态时不能被内联：虚函数运行时需要的代价主要是虚函数不能是内联函数。因为内联函数是在编译期间用被调用的函数体替换函数调用的指令,但是虚函数时在运行期间才能决定到底调用哪个函数，所以虚函数没法在编译期间就进行展开。
<span class="yellow">当然如果使用对象直接调用虚函数它是可以被内联的，但是大多数虚函数是通过对象的指针或引用被调用的，这种调用时不能被内联，而这种调用方式是通常标准的调用方式(谁会定义虚函数使用对象调用呢？ 这不是多此一举吗)</span></p>
</div>
<div class="paragraph">
<p>构造函数不能是虚函数，而且构造函数中调用虚函数，实际执行的是虚函数对应的函数，因为自己没有构造好，多态也是被disable的。</p>
</div>
<div class="paragraph">
<p>静态成员是属于整个类的，不是针对对象而来的，同时其函数指针存放也不同于一般的成员函数，其无法成为一个对象的虚函数的指针，因此无法被定义为虚函数</p>
</div>
</div>
<div class="sect3">
<h4 id="_为什么需要纯虚函数">为什么需要纯虚函数？</h4>
<div class="paragraph">
<p>纯虚函数：在基类中只有声明没有定义，但要求任何派生类都要对纯虚函数进行实现，在基类中通过函数原型后面添加=0来声明纯虚函数 <span class="blue">virtual int32_t Init() = 0;</span></p>
</div>
<div class="paragraph">
<p>引入纯虚函数的原因：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>为了使用多态特性，我们常常需要在基类中定义各种虚拟函数</p>
</li>
<li>
<p>在很多情况下，基类本身生成对象是不合理的，例如动物作为基类，可以派生狮子、老虎、孔雀、青蛙，将动物生成对象显然不合适。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>为了解决以上问题，引入纯虚函数概念，将函数定义为纯虚函数，则编译器要求派生类中必须予以重写以实现多态性，同时含有纯虚函数的类称为抽象类，它不能生成对象。声明了纯虚函数的类不能创建实例，只能创建它的派生类的实例。</p>
</div>
<div class="paragraph">
<p>定义了纯虚函数的类，相当于java的接口。纯虚函数让所有类的对象(派生类)都可以执行纯虚函数的动作，但类无法为纯虚函数提供一个合理地缺省实现。所以纯虚函数的声明就是在告诉类的设计者，你必须提供一个纯虚函数的实现，但我不知道你会怎样实现它。</p>
</div>
</div>
<div class="sect3">
<h4 id="_虚函数常见问题">虚函数常见问题</h4>
<div class="ulist">
<ul>
<li>
<p>虚函数是动态绑定的，也就是说使用虚函数指针能够正确找到实际类对象对应的函数。</p>
</li>
<li>
<p>构造函数不能是虚函数，而且构造函数中执行虚函数，实际上是执行父类对应的函数，因为构造函数中自己类的对象还没有构造好，多态时被disable的。实际测试：即使定义的是子类对象，在父类中调用虚函数执行父类的，在子类中调用虚函数执行的是子类的。</p>
</li>
<li>
<p>析枸函数可以是虚函数，有继承的复杂的类中虚析枸函数往往还是必须的</p>
</li>
<li>
<p>将一个函数定义为纯虚函数，实际上是将这个类定义为抽象类，不能实例化对象</p>
</li>
<li>
<p>纯虚函数通常没有函数体, 使用=0声明函数是一个纯虚函数，我们可以为纯虚函数在类外定义函数体，但是通常没有必要。</p>
</li>
<li>
<p>析枸函数可以是一个纯虚函数，但是纯虚析枸函数必须有定义体，因为析枸函数的调用在子类对象中是隐含的，</p>
</li>
<li>
<p>非纯虚函数必须有定义体，不然是一个错误</p>
</li>
<li>
<p>派生类的override虚函数定义必须和父类的完全一致。除了一个特例，如果父类中的返回值是一个指针或者引用，子类override时可以返回这个指针(或引用)的派生。 例如:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">Animation</span> {
<span style="color:#088;font-weight:bold">public</span>:
    <span style="color:#088;font-weight:bold">virtual</span> ~Animation() = <span style="color:#080;font-weight:bold">default</span>;
    <span style="color:#088;font-weight:bold">virtual</span> Animation *Clone() {
        <span style="color:#080;font-weight:bold">return</span> <span style="color:#950">this</span>;
    }
};

<span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">Dog</span> : <span style="color:#088;font-weight:bold">public</span> Animation {
<span style="color:#088;font-weight:bold">public</span>:
    ~Dog() <span style="color:#088;font-weight:bold">override</span> = <span style="color:#080;font-weight:bold">default</span>;
    Dog *Clone() <span style="color:#088;font-weight:bold">override</span> {
        <span style="color:#080;font-weight:bold">return</span> <span style="color:#950">this</span>;
    }
};</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_为什么需要虚继承虚继承实现的原理解析">为什么需要虚继承？虚继承实现的原理解析？</h4>
<div class="paragraph">
<p>虚继承是多重继承中特有的概念，如图A，B都继承自C，D又继承了B和A，如果不使用虚继承，D中就会有两份C的函数和变量，为了节省内存，可以讲A,B对C的继承定义为虚继承，这样就能保证D中只有一份C的变量和函数。虚继承在一般的应用中很少被用到，所以往往被忽视，这也主要是因为在C++中多重继承不推荐也不常用，而一旦离开了多重继承虚继承就失去了存在的必要，因为这样只会降低使用效率和占用更多的空间。</p>
</div>
<div class="paragraph">
<p>虚继承的特点，在任何派生类中的virtual基类总用一个共享的对象来表示</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./image/sample-plantuml-diagram.png" alt="Class diagram" width="100" height="60">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_设计一个不能被继承的类">设计一个不能被继承的类</h3>
<div class="literalblock">
<div class="content">
<pre>通过将构造函数或析枸函数私有化可以防止该类被继承</pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">单例实现原理说明</div>
<div class="paragraph">
<p>静态函数相当于全局执行代码，除了域的范围（执行时的函数栈）区别，在执行上，它与任何正在执行的代码没有区别。而一个类的实例化（new ClassType()）这种操作，也是一句合法的代码，只要不被访问限制，在任何地方都可以执行。private这种限定词，将一个方法限定在只有与这个方法同类的方法中才可以使用。而某一个类的静态方法，属于这个类。在限定的语义上，它拥有调用private方法的权限。这种限定是在逻辑层面建立的，也就是，并非计算机的汇编层面或者原理层面导致这样的，而是c++这门语言强行实现并规定的</p>
</div>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">NotImplemented</span> {
<span style="color:#088;font-weight:bold">public</span>:
    <span style="color:#777">// 类构造函数或析枸函数私有化之后，只能通过类static函数中进行创建</span>
    <span style="color:#777">// 不能在外部创建，因此如果只实现一个返回指针的instance函数</span>
    <span style="color:#777">// 就能保证该类只在堆中能够创建</span>
    <span style="color:#088;font-weight:bold">static</span> NotImplemented* GetInstance() {
        <span style="color:#080;font-weight:bold">return</span> <span style="color:#080;font-weight:bold">new</span> NotImplemented;
    }

    <span style="color:#088;font-weight:bold">static</span> NotImplemented&amp; GetInstanceRef() {
        <span style="color:#088;font-weight:bold">static</span> NotImplemented notImplemented;
        <span style="color:#080;font-weight:bold">return</span> notImplemented;
    }

<span style="color:#088;font-weight:bold">private</span>:
    NotImplemented() = <span style="color:#080;font-weight:bold">default</span>;
    ~NotImplemented() = <span style="color:#080;font-weight:bold">default</span>;
};

<span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">NotImplementedImpl</span> : <span style="color:#088;font-weight:bold">public</span> NotImplemented {
<span style="color:#088;font-weight:bold">public</span>:
    <span style="color:#777">// Explicitly defaulted default constructor is implicitly deleted</span>
    NotImplementedImpl() = <span style="color:#080;font-weight:bold">default</span>;
    ~NotImplementedImpl() = <span style="color:#080;font-weight:bold">default</span>;

};</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
如果想创建只能在栈上进行实例化的类，可以将函数operator new和operator delete定义为私有，这样无法在外部使用new和delete调用operator new和operator delete，该类的对象只能在栈上创建。
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_内存分配">内存分配</h3>
<div class="ulist">
<ul>
<li>
<p>静态存储区分配。内存在程序编译期间就已经分配好，这块内存在程序整个运行期间都存在，例如全局变量，static 变量</p>
</li>
<li>
<p>在栈上创建，在执行函数时，函数内部局部变量的存储单元都可以在栈上创建，函数执行结束时这些存储单元自动被释放，栈内存分配运算内置于处理器的指令集中，效率很高，但是分配器的内存容量有限。</p>
</li>
<li>
<p>从堆上分配，亦称为动态分配，程序在运行的时候Malloc或者new申请任意多的内存，程序员自己负责在何时用free或delete释放内存，动态内存的生存期由我们决定，使用灵活，但是问题也多</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_指针问题">指针问题</h3>
<div class="paragraph">
<p>将一个数组当成参数传递给函数，回退化为指针，说是指针退化，不如说是数组退化为指针</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#088;font-weight:bold">void</span> function(<span style="color:#0a8;font-weight:bold">char</span> a[<span style="color:#00D">64</span>]) {

}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_指针和引用的区别">指针和引用的区别</h4>
<div class="olist loweralpha">
<ol class="loweralpha">
<li>
<p>指针是一个实体,而引用是一个别名</p>
</li>
<li>
<p>引用无需解引用，指针需要</p>
</li>
<li>
<p>引用只能在定义时被初始化一次，之后不可变，指针可变</p>
</li>
<li>
<p>引用没有const，指针有const</p>
</li>
<li>
<p>引用不能为空，指针可以为空</p>
</li>
<li>
<p>sizeof引用是引用对象的大小，sizeof指针是指针本身的大小</p>
</li>
<li>
<p>指针和引用搞得自增(++)运算意义不一样</p>
</li>
<li>
<p>从内存分配上来看，程序为指针分配内存区域，而引用不需要分配内存区域</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_智能指针">智能指针</h4>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>智能指针：实际上行为类似于指针的类对象，它的一种通用实现方法是采用引用计数的方法</p>
</div>
<div class="ulist">
<ul>
<li>
<p>智能指针将一个计数器于类指向的对象相关联，引用计数跟踪共有多少个对象共享同一指针</p>
</li>
<li>
<p>每次创建类的新对象时，初始化指针并将引用计数设置为1</p>
</li>
<li>
<p>当对象作为另一个对象的副本而创建时，拷贝构造函数拷贝指针并增加与之相应的引用计数</p>
</li>
<li>
<p>对一个对象进行赋值时，赋值操作符减少左操作符对象的引用计数，增加右操作符的引用计数</p>
</li>
<li>
<p>调用析枸函数时，构造函数减少引用计数</p>
</li>
<li>
<p>实现智能指针有两个经典的策略：</p>
<div class="olist loweralpha">
<ol class="loweralpha">
<li>
<p>引入辅助类</p>
</li>
<li>
<p>使用句柄类</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_重载和重写的区别">重载和重写的区别</h3>
<div class="ulist">
<ul>
<li>
<p>override(重写)</p>
<div class="olist loweralpha">
<ol class="loweralpha">
<li>
<p>方法名、参数、返回值相同</p>
</li>
<li>
<p>子方法不能缩小父类方法的访问权限</p>
</li>
<li>
<p>子类方法不能抛出比父类方法更多的异常(但子类方法可以不抛出异常,因为子类和父类的关系是is-a的关系，所有能使用父类的地方肯定都能使用子类代替，要是子类能抛出更多的异常，那么按照调用父类方法使用的地方就会出现问题)</p>
</li>
<li>
<p>存在父类和子类之间</p>
</li>
<li>
<p>方法被定义为final不能进行重写</p>
</li>
</ol>
</div>
</li>
<li>
<p>overload(重载)</p>
<div class="olist loweralpha">
<ol class="loweralpha">
<li>
<p>参数类型、个数、顺序至少一个不相同</p>
</li>
<li>
<p>不能重载只有返回值不同的方法名</p>
</li>
<li>
<p>存在与父类和子类、同类中</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_重载重写和重定义">重载、重写和重定义</h3>
<div class="sidebarblock">
<div class="content">
<div class="title">重载</div>
<div class="ulist">
<ul>
<li>
<p>仅仅函数名相同，参数个数、类型、返回值、参数顺序总有一个不同的</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="blue">关联知识</span>：函数匹配规则，类成员函数重载，模板函数重载</p>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">重写(也称为覆盖)</div>
<div class="ulist">
<ul>
<li>
<p>发生在基类和派生类之间</p>
</li>
<li>
<p>重写的函数除了函数体不同其他的都一致(返回值为指针时子类可以返回子类地想类型的指针或引用)</p>
</li>
<li>
<p>被重写的函数，在父类中必须有virtual修饰</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">重定义(隐藏)</div>
<div class="ulist">
<ul>
<li>
<p>派生类重定义与基类同名的函数</p>
</li>
<li>
<p>若基类为非虚函数，只要函数名相同(不管参数列表是否相同)</p>
</li>
<li>
<p>若基类为虚函数，参数列表需不同(因为参数，返回值都相同为重写; 参数相同，返回值不同编译不通过，说明函数继承时，是否重写看的是函数参数)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>《C语言陷阱》</p>
</div>
<div class="paragraph">
<p><a href="https://baijiahao.baidu.com/s?id=1718109965042627128&amp;wfr=spider&amp;for=pc" class="bare">https://baijiahao.baidu.com/s?id=1718109965042627128&amp;wfr=spider&amp;for=pc</a></p>
</div>
<div class="paragraph">
<p>this指针是右值
虚函数也能被inline修饰，只是当虚函数实现多态时就算使用了inline关键字照样不会被内联</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_placement_new">placement new</h2>
<div class="sectionbody">
<div class="paragraph">
<p>placement new允许我们将对象创建于已经申请的内存中，因为placement new实际上并没有申请内存，所以也不存在所谓的placement delete</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#777">// PlacementNew</span>
<span style="color:#088;font-weight:bold">void</span> PlacementNew() {
    <span style="color:#0a8;font-weight:bold">char</span> *buffer = <span style="color:#080;font-weight:bold">new</span> <span style="color:#0a8;font-weight:bold">char</span>[<span style="color:#080;font-weight:bold">sizeof</span>(MemoryManagement) * <span style="color:#00D">3</span>];

    <span style="color:#088;font-weight:bold">auto</span> *lp1 = <span style="color:#080;font-weight:bold">new</span>(buffer) MemoryManagement;
    <span style="color:#088;font-weight:bold">auto</span> *lp2 = <span style="color:#080;font-weight:bold">new</span>(buffer + <span style="color:#080;font-weight:bold">sizeof</span>(MemoryManagement)) MemoryManagement;
    <span style="color:#088;font-weight:bold">auto</span> *lp3 = <span style="color:#080;font-weight:bold">new</span>(buffer + <span style="color:#080;font-weight:bold">sizeof</span>(MemoryManagement) * <span style="color:#00D">2</span>) MemoryManagement;

    <span style="color:#777">// 如果需要析枸，需要自己调用析枸函数</span>
    lp1-&gt;~MemoryManagement();
    lp2-&gt;~MemoryManagement();
    lp3-&gt;~MemoryManagement();

    <span style="color:#080;font-weight:bold">delete</span>[] buffer;
}</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="./image/image-2022-06-03-21-55-17-778.png" alt="示例图片">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_常用编程语句">常用编程语句</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_位操作">位操作</h3>
<div class="sect3">
<h4 id="_上调到字节对其大小">上调到字节对其大小</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp">uint32_t RoundUp(uint32_t x, uint32_t align) {
    <span style="color:#080;font-weight:bold">return</span> (x + align - <span style="color:#00D">1</span>) &amp; ~ (align - <span style="color:#00D">1</span>);
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_网络">网络</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_tcpdump">tcpdump</h2>
<div class="sectionbody">
<div class="paragraph">
<p>tcpdump - dump traffic on a network interface</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Feeding the Werewolves</div>
<div class="paragraph">
<p>Usage: tcpdump [-aAbdDefhHIJKlLnNOpqStuUvxX#] [ -B size ] [ -c count ]
[ -C file_size ] [ -E algo:secret ] [ -F file ] [ -G seconds ]
[ -i interface ] [ -j tstamptype ] [ -M secret ] [ --number ]
[ -Q in|out|inout ]
[ -r file ] [ -s snaplen ] [ --time-stamp-precision precision ]
[ --immediate-mode ] [ -T type ] [ --version ] [ -V file ]
[ -w file ] [ -W filecount ] [ -y datalinktype ] [ -z postrotate-command ]
[ -Z user ] [ expression ]</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_认识tcpdump">认识tcpdump</h3>
<div class="paragraph">
<p>刚开始接触tcpdump肯定会被这些参数给吓到，其实实际使用中只需要掌握几个关键的参数就行了。</p>
</div>
<div class="sect3">
<h4 id="_抓包">抓包</h4>
<div class="paragraph">
<p>53端口是DNS使用的端口，DNS分为查询和应答：
DSN requires&#8201;&#8212;&#8201;DNS response，来让我们看一下我们的电脑在查询哪些DNS</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>-i : 指定网卡 any代表所有网卡
port : 指定端口</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">andrew@andrew-G3-3590:~$ sudo tcpdump -i any port 53
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on any, link-type LINUX_SLL (Linux cooked v1), capture size 262144 bytes
00:06:03.875169 IP localhost.47870 &gt; localhost.domain: 3209+ [1au] A? api.yiban.io. (41)
00:06:03.875609 IP localhost.domain &gt; localhost.47870: 3209 1/0/1 A 111.230.120.127 (57)
00:06:03.876314 IP localhost.45144 &gt; localhost.domain: 12890+ [1au] PTR? 53.0.0.127.in-addr.arpa. (52)
00:06:03.876639 IP localhost.domain &gt; localhost.45144: 12890 1/0/1 PTR localhost. (75)
00:06:04.057558 IP localhost.45872 &gt; localhost.domain: 63926+ [1au] A? accounts.google.com. (48)
00:06:04.057946 IP localhost.domain &gt; localhost.45872: 63926 1/0/1 A 142.251.42.237 (64)</code></pre>
</div>
</div>
<div class="paragraph">
<p>我有个程序，监听所有的网卡上，监听端口是1668，我应该如何抓包</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">tcpdump -i any port 1668</code></pre>
</div>
</div>
<div class="paragraph">
<p>如果我已经知道对方会连接我的IP: 192..168.1.102</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">tcpdump port 1668 and host 192.168.1.102</code></pre>
</div>
</div>
<div class="paragraph">
<p>如果我想将当前网络数据保存，便于后期查看，可以使用-w将数据进行落盘</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">tcpdump -w packets.pcap</code></pre>
</div>
</div>
<div class="paragraph">
<p>上面的抓包都不会显示具体的数据内容，如果我想看我发送的数据正确与否可以添加-A
当然如果想从网络数据中过滤自己想要的数据使用ngrep更加合适一点</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash"># 抓 80端口的数据，并将数据内容打印出来
tcpdump -A port 80</code></pre>
</div>
</div>
<div class="paragraph">
<p>默认情况下，tcpdump会显示host主机名而不是IP地址，如果想显示IP地址而不是主机名可以添加-n选项</p>
</div>
<div class="paragraph">
<p>如果想看下抓包过程中的网卡信息，可以添加-选项</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">root@andrew-G3-3590:/home/andrew# tcpdump -e port 53
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on wlp4s0, link-type EN10MB (Ethernet), capture size 262144 bytes
22:08:33.408154 40:23:43:e1:18:a9 (oui Unknown) &gt; f4:6d:2f:85:91:74 (oui Unknown), ethertype IPv4 (0x0800), length 72: 192.168.0.101.49171 &gt; 192.168.1.1.domain: 60397+ A? www.bing.com. (30)
22:08:33.408427 40:23:43:e1:18:a9 (oui Unknown) &gt; f4:6d:2f:85:91:74 (oui Unknown), ethertype IPv4 (0x0800), length 71: 192.168.0.101.37056 &gt; 192.168.1.1.domain: 3124+ A? cn.bing.com. (29)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_常用的抓包选项">常用的抓包选项</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>-i 指定在那张网卡上抓包，-i any可以在所有网卡上抓包</p>
<div class="literalblock">
<div class="content">
<pre>tcpdump -i lo</pre>
</div>
</div>
</li>
<li>
<p>-w 将抓包内容保存到本地，而不是打印出来</p>
<div class="literalblock">
<div class="content">
<pre>tcpdump host 8.8.8.8 -w my_pack.pcap</pre>
</div>
</div>
</li>
<li>
<p>-c 当将抓包内容保存到本地时，有必要指定一下抓包的个数，数据太多导致本地磁盘写满</p>
<div class="literalblock">
<div class="content">
<pre>tcpdump -c 10000</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_需要注意的内容">需要注意的内容</h4>
<div class="ulist">
<ul>
<li>
<p>source 和 dest IP地址和端口</p>
</li>
<li>
<p>时间戳</p>
</li>
<li>
<p>TCP flags</p>
</li>
<li>
<p>DNS query</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="./image/image-2022-06-16-22-23-29-702.png" alt="udp-tcp">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="./image/image-2022-06-16-22-24-57-048.png" alt="rst">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_bpf_filter">BPF Filter</h4>
<div class="paragraph">
<p>当你使用 port 53来过滤DNS数据时， port 53就是一个BPF Filter</p>
</div>
<div class="paragraph">
<p>tcpdump port 53 会将目的端口或者源端口为53的数据抓取</p>
</div>
<div class="paragraph">
<p>tcpdump host 192.168.0.12 会将目的地址或者源地址为192.168.0.12的数据包捕获</p>
</div>
<div class="paragraph">
<p>同样BPF Filter语言中可以使用and or not等连接词将不同的语句绑定一起使用</p>
</div>
<div class="paragraph">
<p>host 1.2.3.4 and port 53 就是抓取目的地址为1.2.3.4:53 后者地址为1.2.3.4:53的网络数据</p>
</div>
</div>
<div class="sect3">
<h4 id="_小技巧">小技巧</h4>
<div class="paragraph">
<p>如果你的设备是嵌入式设备，或者设备上没有安装wireshark，这个时候你要是还想像使用wireshark本地抓包一样来实时用wireshark查看设备上的网络数据，可以借助nc或者ssh实现远程实时抓包</p>
</div>
<div class="paragraph">
<p>在需要抓包的设备上，输入一下命令, 其实就是将tcpdump抓到的数据，传递给nc, nc会将数据通过端口 11111传递给链接上来的客户端</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">tcpdump -i any port 53  -s0 -w - | nc -l -p 11111</code></pre>
</div>
</div>
<div class="paragraph">
<p>在有wireshark的机子上使用</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash"># 使用nc从127.0.0.1:11111上既然收数据，兵节哀给你数据通过管道传递给wireshark
nc 127.0.0.1  11111 | wireshark -k -S -i -</code></pre>
</div>
</div>
<div class="paragraph">
<p>如果没有wireshark需要抓包的设备上支持ssh可以直接使用如下命令进行抓包</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">ssh root@some.host &quot;tcpdump -i eth0 -l -w -&quot; | wireshark -k -i -</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_http">HTTP</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_分布式">分布式</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_linux">Linux</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_linux二进制分析">Linux二进制分析</h2>
<div class="sectionbody">
<div class="sidebarblock">
<div class="content">
<div class="title">汇编</div>
<div class="paragraph">
<p>如果你能够读得懂汇编源，那么所有的程序对你来说，都是开源的</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_linux环境和相关工具">Linux环境和相关工具</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Linux自带了很多好用的二进制分析工具，这些可以在binutils中获取，具体的网址：
<a href="http://www.gnu.org/software/binutils">binutils</a>，里面包含了一些用于分析和破解的工具</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_linux工具">Linux工具</h3>
<div class="sect3">
<h4 id="_gdb_后端程序员必备"><strong>GDB</strong> 后端程序员必备</h4>
<div class="paragraph">
<p>我在飞书上有对应的文章讲解
<a href="https://ny5odfilnr.feishu.cn/docs/doccn3oRPLnUMmKnfc1qu4WKZIe">GDB</a>，同时也在b站上更新了视频讲解
<a href="https://www.bilibili.com/video/BV1Df4y1c7gG?spm_id_from=333.999.0.0&amp;vd_source=d0f1fc53c13a7dcbda92faa2e368b71e">GDB讲解</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_objdump">objdump</h4>
<div class="paragraph">
<p>对代码和二进制文件可以进行快速的反汇编，但是要针对有挑战性或者针对恶意软件时，objdump就显现出局限性了。其最主要的缺陷就是需要依赖ELF头，并且不会进行控制流分析</p>
</div>
<div class="ulist">
<ul>
<li>
<p>查看ELF文件中所有节的数据或代码</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>objdump -D
<span class="red">object</span></code></p>
</div>
<div class="ulist">
<ul>
<li>
<p>只查看ELF文件中的程序代码</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>objdump -d
<span class="red">object</span></code></p>
</div>
<div class="ulist">
<ul>
<li>
<p>查看ELF文件所有符号</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>objdump -tT
<span class="red">object</span></code></p>
</div>
</div>
<div class="sect3">
<h4 id="_objcopy">objcopy</h4>
<div class="paragraph">
<p><code>objcopy</code> 很小但也很强大，可以用他来分析和修改任意类型的ELF文件，可以单独修改ELF文件的一小段，比如将A文件的 <code>.data</code> 段复制到B文件中</p>
</div>
<div class="paragraph">
<p><code>objcopy –only-section=.data &lt;infile&gt; &lt;outfile&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_strace"><strong>strace</strong></h4>
<div class="paragraph">
<p>系统调用追踪，基于ptrace,strace 通过在一个循环中使用PTRACE_SYSCALL 请求来显示运行中程序的系统调用（也称为 syscalls）活动相关的信息以及程序执行中捕捉到 的信号量。 strace 在调试过程中非常有用，也可以用来收集运行时系统调用相关的信息</p>
</div>
<div class="ulist">
<ul>
<li>
<p>使用strace来追踪一个基本的程序</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>strace ./main -o ls.out</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p>附加到一个运行的进程上</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>strace -p &lt;pid&gt; -o deamon.out</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p>如果想看读入到文件描述符3中的所有数据，可以运行下面的命令</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>strace –e read=3 /bin/ls</code></p>
</div>
<div class="paragraph">
<p>同样使用 <code>-e write=3</code> 可以查看写入到对应文件描述符中国的数据</p>
</div>
</div>
<div class="sect3">
<h4 id="_ltrace">ltrace</h4>
<div class="paragraph">
<p>库追踪，追踪库中用到的库函数</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">- Print (trace) library calls of a program binary:
   ltrace ./{{program}}

 - Count library calls. Print a handy summary at the bottom:
   ltrace -c {{path/to/program}}

 - Trace calls to malloc and free, omit those done by libc:
   ltrace -e malloc+free-@libc.so* {{path/to/program}}

 - Write to file instead of terminal:
   ltrace -o {{file}} {{path/to/program}}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ftrace">ftrace</h4>
<div class="paragraph">
<p>函数追踪</p>
</div>
<div class="paragraph">
<p><span class="red"><a href="https://github.com/elfmaster/ftrace">github ftrace</a></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_readelf">readelf</h4>
<div class="paragraph">
<p>readelf命令是一个非常有用的解析工具，在进行正式的反汇编之前需要收集目标文件的相关信息，该工具能够提供收集信息所需要特定的ELF的所有数据。主要有以下几种：</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha">
<li>
<p>符号</p>
</li>
<li>
<p>段</p>
</li>
<li>
<p>节</p>
</li>
<li>
<p>重定向入口</p>
</li>
<li>
<p>数据动态链接</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>常用语句</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>查询节表头</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>readelf -S &lt;object&gt;</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p>查询程序表头</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>readelf -l &lt;object&gt;</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p>查询ELF文件头数据</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>readelf -e &lt;object&gt;</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p>查询符号表</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>readelf -s &lt;object&gt;</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p>查询重定位入口</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>readelf -r &lt;object&gt;</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p>查询动态段</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>readelf -d &lt;object&gt;</code></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_设备和文件">设备和文件</h3>
<div class="paragraph">
<p>linux中有许多设备和文件，还有/proc入口，对于反汇编和工程师来说都非常有用</p>
</div>
<div class="sect3">
<h4 id="_procpidmaps"><code>/proc/&lt;pid&gt;/maps</code></h4>
<div class="paragraph">
<p>该maps中保存了一个进程镜像的布局，通过展现每个内存映射来实现，展现的内容包含可执行文件、共享库、栈、堆和VDSO等，在解析进程空间布局的时候非常有用</p>
</div>
</div>
<div class="sect3">
<h4 id="_prockcore"><code>/proc/kcore</code></h4>
<div class="paragraph">
<p>kcore是proc文件系统的一项，linux内核的动态核心文件。其实就是使用ELF核心文件形式来 展现出原生内核内存转储，可以使用gdb对  <code>/proc/kcore/</code> 来对内核进行调试和分析</p>
</div>
</div>
<div class="sect3">
<h4 id="_bootstrapsystem_map"><code>/bootstrap/System.map.*</code></h4>
<div class="paragraph">
<p>里面包含了内核的所有符号表</p>
</div>
</div>
<div class="sect3">
<h4 id="_prockallsyms"><code>/proc/kallsyms</code></h4>
<div class="paragraph">
<p>和System.map类似，区别就是kallsyms是内核所属的/proc的一个入口并且可以动态更新，如果安装了新的LKM(Linux Kernel Module)，符号会自动添加到 <code>/processor/kallsyms</code> 中，如果能在 <code>CONFIG_KALLSYMS_ALL</code> 内核配置中指明，这可以包含内核中的全部符号。</p>
</div>
</div>
<div class="sect3">
<h4 id="_prociomem"><code>/proc/iomem</code></h4>
<div class="paragraph">
<p>iomem与`/proc/&lt;pid&gt;/maps` 类似，不过是和系统内存相关的，如果想知道内核text段所映射的物理内存地址，可以通过搜索`Kernel` 字符串进行查找，要使用root查找，否则给出的地址都是空的</p>
</div>
<div class="paragraph">
<p><code>grep "Kernel" /proc/iomem</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">andrew@andrew-G3-3590:/proc$ sudo grep &quot;Kernel&quot; /proc/iomem
  195c00000-196c02666 : Kernel code
  196e00000-197840fff : Kernel rodata
  197a00000-197d6e33f : Kernel data
  198068000-1985fffff : Kernel bss</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ecfs"><code>ECFS</code></h4>
<div class="paragraph">
<p>extended core file snapshot 扩展核心文件快照，是一项特殊的核心转存储技术，专门为进程镜像的高级取证分析所设计。
<a href="https://github.com/elfmaster/ecfs">ECFS</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_连接器相关环境指针">连接器相关环境指针</h3>
<div class="paragraph">
<p>动态加载/连接器以及链接的概念，在程序链接执行的过程中都是避不开的基本组成部分。</p>
</div>
<div class="sect3">
<h4 id="_ld_preload_环境变量"><code>LD_PRELOAD</code> 环境变量</h4>
<div class="paragraph">
<p>指定到一个库的路径，这里面的库比其他库有更高的优先级，这就允许预加载库中的函数和符号能够覆盖掉后续链接库中的函数和符号。<br>
运用该技术，允许你通过重定向共享库函数来进行运行时修复，通常运用该技术绕过反调试代码。</p>
</div>
</div>
<div class="sect3">
<h4 id="_ld_show_auxv_环境变量"><code>LD_SHOW_AUXV</code> 环境变量</h4>
<div class="paragraph">
<p>该环境变量能够通知程序加载器来展示程序运行时的辅助向量，辅助向量是放在程序栈(通过内核的ELF常规加载方式)上的信息，附带了传递给动态连接器的程序相关的信息。
例如，要想获取进程镜像 VDSO 页的内存地址（也可以使用 maps 文件获取，之前介绍过），就需要查询 AT_SYSINFO。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">andrew@andrew-G3-3590:/proc$ LD_SHOW_AUXV=1 whoami
AT_SYSINFO_EHDR:      0x7ffdd6ae4000
AT_HWCAP:             bfebfbff
AT_PAGESZ:            4096
AT_CLKTCK:            100
AT_PHDR:              0x55afacc19040
AT_PHENT:             56
AT_PHNUM:             13
AT_BASE:              0x7f99995fc000
AT_FLAGS:             0x0
AT_ENTRY:             0x55afacc1b700
AT_UID:               1000
AT_EUID:              1000
AT_GID:               1000
AT_EGID:              1000
AT_SECURE:            0
AT_RANDOM:            0x7ffdd6a2e279
AT_HWCAP2:            0x2
AT_EXECFN:            /usr/bin/whoami
AT_PLATFORM:          x86_64
andrew</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_连接器脚本">连接器脚本</h4>
<div class="paragraph">
<p>连接器脚本是一个值得重点关注，因为连接器脚本是由连接器解释的，把程序划分为相应的节、内存和符号。默认的连接器脚本可以使用 <code>ld -verbose</code> 进行查看</p>
</div>
<div class="paragraph">
<p>ld 链接器程序有其自己解释的一套语言，当有文件（如可重定位的目标
文件、共享库和头文件）输入时， ld 链接器程序会用自己的语言来决定输出
文件（如可执行程序）的组织方式。例如，如果输出的是一个 ELF 可执行文
件，链接器脚本能够决定该输出文件的布局，以及每个段里面包含哪些节。
另外举一个例子： .bss 节总是放在 data 段的末尾，这就是链接器脚本决定
的</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_elf二进制格式">ELF二进制格式</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ELF文件已经成为UNIX和类UNIX系统的标准二进制格式。 ELF文件可以用于可执行文件，共享库，目标文件，coredump文件以及内核引导镜像文件。</p>
</div>
<div class="paragraph">
<p>通过对ELF文件的学习你可以理解程序如何映射到磁盘兵加载到内存中的</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">ELF文件知识点</div>
<div class="ulist">
<ul>
<li>
<p>ELF文件类型</p>
</li>
<li>
<p>程序头</p>
</li>
<li>
<p>节头</p>
</li>
<li>
<p>符号</p>
</li>
<li>
<p>重定位</p>
</li>
<li>
<p>动态链接</p>
</li>
<li>
<p>编码ELF解析器</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_elf文件类型">ELF文件类型</h3>
<div class="paragraph">
<p>ELF通常有以下几种文件类型</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ET_NONE</code> 未知类型，标明文件类型不确定或者还没有被定义</p>
</li>
<li>
<p><code>ET_REL</code> 从定位文件，ELF类型标记为relocatable意味着该文件被标记为一段可重定位的代码，有时也称之为目标文件，其实说白了就是编译代码之后留下的.o文件，这些文件中包含了创建可执行文件所需的代码和数据。</p>
</li>
<li>
<p><code>ET_EXEC</code> 可执行文件。ELF类型为executable，表明这个文件被标记为可执行文件，也就是可执行程序</p>
</li>
<li>
<p><code>ET_DYN</code> 共享目标文件，ELF类型为dynamic，也称之为动态共享库(实际上x86_64的可执行文件也都是这个类型)</p>
</li>
<li>
<p><code>ET_CORE</code> 核心文件，也成为核心转存储文件，是程序崩溃时的镜像信息</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>可以通过 <code>man 5 elf</code> 来查看ELF文件的详细信息</p>
</div>
<div class="paragraph">
<p>ELF文件头的结构体定义如下</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#579">#define</span> EI_NIDENT (<span style="color:#00D">16</span>)

<span style="color:#080;font-weight:bold">typedef</span> <span style="color:#080;font-weight:bold">struct</span>
{
  <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">char</span>        e_ident[EI_NIDENT];        <span style="color:#777">/* Magic number and other info */</span>
  Elf32_Half        e_type;                        <span style="color:#777">/* Object file type */</span>
  Elf32_Half        e_machine;                <span style="color:#777">/* Architecture */</span>
  Elf32_Word        e_version;                <span style="color:#777">/* Object file version */</span>
  Elf32_Addr        e_entry;                <span style="color:#777">/* Entry point virtual address */</span>
  Elf32_Off        e_phoff;                <span style="color:#777">/* Program header table file offset */</span>
  Elf32_Off        e_shoff;                <span style="color:#777">/* Section header table file offset */</span>
  Elf32_Word        e_flags;                <span style="color:#777">/* Processor-specific flags */</span>
  Elf32_Half        e_ehsize;                <span style="color:#777">/* ELF header size in bytes */</span>
  Elf32_Half        e_phentsize;                <span style="color:#777">/* Program header table entry size */</span>
  Elf32_Half        e_phnum;                <span style="color:#777">/* Program header table entry count */</span>
  Elf32_Half        e_shentsize;                <span style="color:#777">/* Section header table entry size */</span>
  Elf32_Half        e_shnum;                <span style="color:#777">/* Section header table entry count */</span>
  Elf32_Half        e_shstrndx;                <span style="color:#777">/* Section header string table index */</span>
} Elf32_Ehdr;

<span style="color:#080;font-weight:bold">typedef</span> <span style="color:#080;font-weight:bold">struct</span>
{
  <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">char</span>        e_ident[EI_NIDENT];        <span style="color:#777">/* Magic number and other info */</span>
  Elf64_Half        e_type;                        <span style="color:#777">/* Object file type */</span>
  Elf64_Half        e_machine;                <span style="color:#777">/* Architecture */</span>
  Elf64_Word        e_version;                <span style="color:#777">/* Object file version */</span>
  Elf64_Addr        e_entry;                <span style="color:#777">/* Entry point virtual address */</span>
  Elf64_Off        e_phoff;                <span style="color:#777">/* Program header table file offset */</span>
  Elf64_Off        e_shoff;                <span style="color:#777">/* Section header table file offset */</span>
  Elf64_Word        e_flags;                <span style="color:#777">/* Processor-specific flags */</span>
  Elf64_Half        e_ehsize;                <span style="color:#777">/* ELF header size in bytes */</span>
  Elf64_Half        e_phentsize;                <span style="color:#777">/* Program header table entry size */</span>
  Elf64_Half        e_phnum;                <span style="color:#777">/* Program header table entry count */</span>
  Elf64_Half        e_shentsize;                <span style="color:#777">/* Section header table entry size */</span>
  Elf64_Half        e_shnum;                <span style="color:#777">/* Section header table entry count */</span>
  Elf64_Half        e_shstrndx;                <span style="color:#777">/* Section header string table index */</span>
} Elf64_Ehdr;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_elf程序头">ELF程序头</h3>
<div class="paragraph">
<p>ELF程序头是对二进制文件段的描述，是程序装载必必需的一部分。段(segment)是内核装载时被解析的，描述了磁盘上可执行文件的内存布局，以及如何映射到内存中。可以通过引用原始ELF头中名为e_phoff(程序头偏移量)的偏移量来得到程序比头表。</p>
</div>
<div id="PHdr01" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#080;font-weight:bold">typedef</span> <span style="color:#080;font-weight:bold">struct</span> {
   uint32_t   p_type;
   Elf32_Off  p_offset;
   Elf32_Addr p_vaddr;
   Elf32_Addr p_paddr;
   uint32_t   p_filesz;
   uint32_t   p_memsz;
   uint32_t   p_flags;
   uint32_t   p_align;
} Elf32_Phdr;

<span style="color:#080;font-weight:bold">typedef</span> <span style="color:#080;font-weight:bold">struct</span> {
   uint32_t   p_type;   <span style="color:#777">// 段类型</span>
   uint32_t   p_flags; <span style="color:#777">// 段标记 I.E (execute|read|write)</span>
   Elf64_Off  p_offset; <span style="color:#777">// 段偏移</span>
   Elf64_Addr p_vaddr; <span style="color:#777">// 段虚拟地址</span>
   Elf64_Addr p_paddr; <span style="color:#777">// 段物理地址</span>
   uint64_t   p_filesz; <span style="color:#777">// 段在文件中的大小</span>
   uint64_t   p_memsz;  <span style="color:#777">// 段在内存中的大小</span>
   uint64_t   p_align; <span style="color:#777">// 段在内存中的对其方式</span>
} Elf64_Phdr;</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_pt_load"><code>PT_LOAD</code></h4>
<div class="paragraph">
<p>一个可执行程序最少有一个`PT_LOAD`类型的段，这类程序头秒数的是可装载的段，也就是说这种类型的段将被装载或者映射到内存中。<br>
一个需要动态链接的ELF可执行文件，通常需要包含以下两个可装载的段(PT_LOAD):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>存放程序代码的text段</p>
</li>
<li>
<p>存放全局变量和动态链接信息的dta段</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>上面两个段，会按照p_align的对其的方式在内存中对其。</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>通常将text段代码权限设置为 PF_X|PF_R(读和可执行)<br>
将data段的权限设置为 PF_W|PF_R(读和写)，有些病毒通过修改ELF文件的这些权限来实现病毒感染，如：千面人病毒(polymorphic virus)</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_pt_dynamic_动态段的_phdr"><code>PT_DYNAMIC</code> 动态段的 <code>Phdr</code></h4>
<div class="paragraph">
<p>动态段是动态链接可执行文件特有的，包含了动态连接器所必须的一些信息，在动态段包含了一些标记和指针。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>运行时需要链接的共享库列表</p>
</li>
<li>
<p>全局偏移表(GOT)的地址</p>
</li>
<li>
<p>从定位条目的相关信息</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>man手册中有这样一段内容，说明了d_tag的作用</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">d_tag</div>
<div class="paragraph">
<p>The .dynamic section contains a series of structures that hold relevant dynamic linking  informa‐
tion.  The d_tag member controls the interpretation of d_un.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#080;font-weight:bold">typedef</span> <span style="color:#080;font-weight:bold">struct</span> {
   Elf32_Sword    d_tag;
   <span style="color:#080;font-weight:bold">union</span> {
       Elf32_Word d_val;
       Elf32_Addr d_ptr;
   } d_un;
} Elf32_Dyn;
<span style="color:#088;font-weight:bold">extern</span> Elf32_Dyn _DYNAMIC[];</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#080;font-weight:bold">typedef</span> <span style="color:#080;font-weight:bold">struct</span> {
   Elf64_Sxword    d_tag;
   <span style="color:#080;font-weight:bold">union</span> {
       Elf64_Xword d_val;
       Elf64_Addr  d_ptr;
   } d_un;
} Elf64_Dyn;
<span style="color:#088;font-weight:bold">extern</span> Elf64_Dyn _DYNAMIC[];</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>动态段包含了一些结构体，如上，这些结构体中存放着动态链接相关的信息，d_tag成员变量控制着d_un的含义。</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. 标记名List</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">标记名</th>
<th class="tableblock halign-left valign-top">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT_HASH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">符号散列表地址</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT_STRTAB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">字符串表的地址</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT_SYMTAB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">符号表地址</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT_RELA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">相对地址重定位表的地址</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT_RELASZ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rela 表的字节大小</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT_RELAENT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rela 表条目的字节大小</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT_STRSZ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">字符串表的字节大小</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT_SYMENT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">符号表条目的字节大小</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT_INIT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">初始化函数的地址</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT_FINI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">终止函数的地址</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT_SONAME</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">共享目标文件名的字符串表偏移量</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT_RPATH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">库搜索路径的字符串表偏移量</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT_SYMBOLIC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">修改链接器，在可执行文件之前的共享目标文件中搜索符号</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT_REL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rel relocs 表的地址</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT_RELSZ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rel 表的字节大小</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT_RELENT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rel 表条目的字节大小</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT_PLTREL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PLT 引用的 reloc 类型（ Rela 或 Rel）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT_DEBUG</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">还未进行定义，为调试保留</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT_TEXTREL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">缺少此项表明重定位只能应用于可写段</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT_JMPREL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">仅用于 PLT 的重定位条目地址</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT_BIND_NOW</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">指示动态链接器在将控制权交给可执行文件之前处理所有的重定位</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT_RUNPATH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">库搜索路径的字符串表偏移量</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_pt_none">PT_NONE</h4>
<div class="paragraph">
<p>该段可以用来保存与特定供应商或者系统相关的附加信息，一些供应商或者系统构建者有时需要在目标文件中标记上特定的信息，以便于对程序的一致性、兼容性进行检查。比较有意思的是，因为可执行文件运行时并不需要这一段，这个段成为了很容易受感染的段。</p>
</div>
<div class="paragraph">
<p>具体的可参见：
<a href="http://vxheavens.com/lib/vhe06.html">VHE</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_pt_interp">PT_INTERP</h4>
<div class="paragraph">
<p>PT_INTERP段只将位置和大小信息存放在一个以null结尾的字符串中，是对程序解释器位置的描述。例如 /libc/linux-ld.so.2一般是指动态连接器的位置，也即程序解释器的位置</p>
</div>
</div>
<div class="sect3">
<h4 id="_pt_phdr">PT_PHDR</h4>
<div class="paragraph">
<p>PT_PHDR段保存了程序头表本身的位置和大小。phdr表保存了所有Phdr对文件中段的描述信息</p>
</div>
<div class="paragraph">
<p>可以使用 <code>readelf –l &lt;filename&gt;</code> 命令来查看文件的Phdr表：</p>
</div>
<div id="JT01" class="listingblock">
<div class="title">readelf -f &lt;filename&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">andrew@andrew-G3-3590:/work/note_book/cmake-build-debug/src$ readelf -l ./main

Elf 文件类型为 DYN (共享目标文件)
Entry point 0x1100
There are 13 program headers, starting at offset 64

程序头：
  Type           Offset             VirtAddr           PhysAddr
                 FileSiz            MemSiz              Flags  Align
  PHDR           0x0000000000000040 0x0000000000000040 0x0000000000000040
                 0x00000000000002d8 0x00000000000002d8  R      0x8
  INTERP         0x0000000000000318 0x0000000000000318 0x0000000000000318
                 0x000000000000001c 0x000000000000001c  R      0x1
      [Requesting program interpreter: /lib64/ld-linux-x86-64.so.2]
  LOAD           0x0000000000000000 0x0000000000000000 0x0000000000000000
                 0x0000000000000ab8 0x0000000000000ab8  R      0x1000
  LOAD           0x0000000000001000 0x0000000000001000 0x0000000000001000
                 0x00000000000003f5 0x00000000000003f5  R E    0x1000
  LOAD           0x0000000000002000 0x0000000000002000 0x0000000000002000
                 0x0000000000000250 0x0000000000000250  R      0x1000
  LOAD           0x0000000000002d60 0x0000000000003d60 0x0000000000003d60
                 0x00000000000002b0 0x00000000000003f8  RW     0x1000
  DYNAMIC        0x0000000000002d80 0x0000000000003d80 0x0000000000003d80
                 0x0000000000000200 0x0000000000000200  RW     0x8
  NOTE           0x0000000000000338 0x0000000000000338 0x0000000000000338
                 0x0000000000000020 0x0000000000000020  R      0x8
  NOTE           0x0000000000000358 0x0000000000000358 0x0000000000000358
                 0x0000000000000044 0x0000000000000044  R      0x4
  GNU_PROPERTY   0x0000000000000338 0x0000000000000338 0x0000000000000338
                 0x0000000000000020 0x0000000000000020  R      0x8
  GNU_EH_FRAME   0x0000000000002014 0x0000000000002014 0x0000000000002014
                 0x0000000000000074 0x0000000000000074  R      0x4
  GNU_STACK      0x0000000000000000 0x0000000000000000 0x0000000000000000
                 0x0000000000000000 0x0000000000000000  RW     0x10
  GNU_RELRO      0x0000000000002d60 0x0000000000003d60 0x0000000000003d60
                 0x00000000000002a0 0x00000000000002a0  R      0x1

 Section to Segment mapping:
  段节...
   00
   01     .interp
   02     .interp .note.gnu.property .note.gnu.build-id .note.ABI-tag .gnu.hash .dynsym .dynstr .gnu.version .gnu.version_r .rela.dyn .rela.plt
   03     .init .plt .plt.got .plt.sec .text .fini
   04     .rodata .eh_frame_hdr .eh_frame
   05     .init_array .fini_array .dynamic .got .data .bss
   06     .dynamic
   07     .note.gnu.property
   08     .note.gnu.build-id .note.ABI-tag
   09     .note.gnu.property
   10     .eh_frame_hdr
   11
   12     .init_array .fini_array .dynamic .got</code></pre>
</div>
</div>
<div class="paragraph">
<p>从上到下一次是，PT_PHDR,PT_INTERP,PT_LOAD段<br>
text段是可读可执行，data段是可读可写，这两个段都是按照0x1000(4096)的对其标识符，放好对应一页</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_elf节头">ELF节头</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">segment and section</div>
<div class="paragraph">
<p>在开始之前段(segment)和节不能搞混了，经常有人把段和节搞混了，节不是段。段是程序执行的必要组成部分，在每个段中会有代码或者数据被划分为不同的节。节头表是对这些节的位置和大小的描述，主要用于调试。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>节头对于程序来说不是必需的，没有节头表程序仍然可以正常执行，因为节头表没有对程序的内存布局进行描述，对程序内存布局的描述是程序头表的任务。节头只是对程序头的补充。使用命令 <code>readelf -l</code> 可以查看一个可执行程序的节头，可以很直观的看到节和段之间的关系</p>
</div>
<div class="paragraph">
<p><a href="#JT01">节头</a></p>
</div>
<div class="paragraph">
<p>如果一个程序没有节头，并不是意味着可执行文件中没有节了，知识节头的信息没有，无法通过节头来引用节而已。对于调试器或者反汇编的程序来说只是可以参考的信息变少了。</p>
</div>
<div class="paragraph">
<div class="title">总结</div>
<p>每一个节都保存了某种类型的代码或者数据，数据可以是程序中的全局变量，也可以是连接器所需的动态链接信息。每个可执行程序都有节但是不一定有节头，尤其是有人故意将节头从表中删除(去除节头增加调试难度)，当然程序默认是有节头的。
常见的调试工具gdb，objcopy, objdump等都需要使用节头来定位到符号数据的节来获取符号信息。如果没有节头，那么gdb和objdump这些工具几乎无用武之地</p>
</div>
<div class="paragraph">
<p>上面我们展示了Phdr<a href="#PHdr01">程序头</a>，这里我们看一下节头的数据结构：</p>
</div>
<div class="listingblock">
<div class="title">section struct</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#080;font-weight:bold">typedef</span> <span style="color:#080;font-weight:bold">struct</span> {
   uint32_t   sh_name;
   uint32_t   sh_type;
   uint32_t   sh_flags;
   Elf32_Addr sh_addr;
   Elf32_Off  sh_offset;
   uint32_t   sh_size;
   uint32_t   sh_link;
   uint32_t   sh_info;
   uint32_t   sh_addralign;
   uint32_t   sh_entsize;
} Elf32_Shdr;

<span style="color:#080;font-weight:bold">typedef</span> <span style="color:#080;font-weight:bold">struct</span> {
   uint32_t   sh_name;  <span style="color:#777">// offet into shdr string table for shdr name</span>
   uint32_t   sh_type; <span style="color:#777">// 类型 I.E SHT_PROGBITS</span>
   uint64_t   sh_flags; <span style="color:#777">// shdr flags I.E SHT_ERITE|SHT_ALLOC</span>
   Elf64_Addr sh_addr;  <span style="color:#777">// 指向节开始的地址</span>
   Elf64_Off  sh_offset; <span style="color:#777">// shdr在文件开头的偏移的大小</span>
   uint64_t   sh_size; <span style="color:#777">// 当前节占用的大小</span>
   uint32_t   sh_link; <span style="color:#777">// 指向其他节</span>
   uint32_t   sh_info; <span style="color:#777">// 具体含义 依赖类型的设置</span>
   uint64_t   sh_addralign; <span style="color:#777">// 当前节对其方式 按照那种方式对其</span>
   uint64_t   sh_entsize; <span style="color:#777">// size of each certain entries that may be in section</span>
} Elf64_Shdr;</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_text_节"><code>.text</code> 节</h4>
<div class="sidebarblock">
<div class="content">
<div class="title">.text</div>
<div class="paragraph">
<p><span class="yellow">.text</span> 节是保存了程序代码指令的代码节。一段可执行程序，如果存在 Phdr，.text就会存在于text段中。由于.text保存了程序代码，因此此节类型为SHT_PROGBITS</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_rodata_节"><code>.rodata</code> 节</h4>
<div class="sidebarblock">
<div class="content">
<div class="title">.rodata</div>
<div class="paragraph">
<p>只读数据如 <code>printf("hello world")</code> 中的字符串就会被存放到只读节.rodata中。因为是只读的，所以只能在text段找到.rodata而data段中不存在.rodata节。因为是只读的所以.rodata节的类型为SHT_PROGBITS</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_plt_节"><code>.plt</code> 节</h4>
<div class="sidebarblock">
<div class="content">
<div class="title">.plt</div>
<div class="paragraph">
<p><code>.plt</code> 节中包含了动态连接器调用从共享库导入的函数所必须的相关代码，由于其存在于text段，同样也是保存了代码，因此类型为SHT_PROGBITS</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_data_节"><code>.data</code> 节</h4>
<div class="sidebarblock">
<div class="content">
<div class="title">.data</div>
<div class="paragraph">
<p>这里千万不要弄混了，.data节和data段是两个东西，.data节存在于data段中，保存了初始化的全局变量等数据。由于其保存了程序的变量数据，因此此类型为SHT_PROGBITS</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_bss_节"><code>.bss</code> 节</h4>
<div class="sidebarblock">
<div class="content">
<div class="title">.bss</div>
<div class="paragraph">
<p>该节保存了未进行初始化的全局数据，属于data段的一部分，占用的空间一般也不会超过4字节，仅仅用来表示这个节本身的空间大小。由于.bss节未保存实际数据，因此节类型为SHT_NOBITS</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_got_plt_节"><code>.got.plt</code> 节</h4>
<div class="sidebarblock">
<div class="content">
<div class="title">.got.plt</div>
<div class="paragraph">
<p><code>.got</code> 节保存了全局偏移表，.got和.plt节一起提供了对导入的共享库函数的访问入口，由于动态连接器在运行时进行修改，如果攻击者获得了堆或者.bss漏洞的一个指针大小的写原语，就可以实现对该节进行任意的修改。因为该节跟程序执行密切相关，因此该节类型为SHT_PROGBITS</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_dynsym_节"><code>.dynsym</code> 节</h4>
<div class="sidebarblock">
<div class="content">
<div class="title">.dynsym</div>
<div class="paragraph">
<p>共享库的动态符号信息，该节保存在text段中，类型为SHT_DYNSYM</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_synstr_节"><code>.synstr</code> 节</h4>
<div class="sidebarblock">
<div class="content">
<div class="title">.synstr</div>
<div class="paragraph">
<p>动态符号字符串表，这些字符串代表了符号的名称，都以空字符串为终止符</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_rel_节"><code>.rel.*</code> 节</h4>
<div class="sidebarblock">
<div class="content">
<div class="title">.rel.*</div>
<div class="paragraph">
<p>重定位节保存了重定位相关的信息， 这些信息描述了如何在链接或者运行
时，对 ELF 目标文件的某部分内容或者进程镜像进行补充或修改。该节类型为SHT_REL</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_hash_节"><code>.hash</code> 节</h4>
<div class="sidebarblock">
<div class="content">
<div class="title">.hash</div>
<div class="paragraph">
<p><code>.hash</code> 节有时也被称为.gnu.hash, 保存了一个用于查询符号表的散列表</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_symtab_节"><code>.symtab</code> 节</h4>
<div class="sidebarblock">
<div class="content">
<div class="title">.symtab</div>
<div class="paragraph">
<p>该节保存了Elfn_sym类型的符号信息，类型为SHT_SYMTAB</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_strtab_节"><code>.strtab</code> 节</h4>
<div class="sidebarblock">
<div class="content">
<div class="title">.strtab</div>
<div class="paragraph">
<p>保存符号字符串表，表中的内容会被.symtab的Elfn_sym结构中的st_name条目引用，因为保存了字符串表类型为SHT_STRTAB</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_shstrtab_节"><code>.shstrtab</code> 节</h4>
<div class="sidebarblock">
<div class="content">
<div class="title">.shstrtab</div>
<div class="paragraph">
<p>保存节头字符串表，该表是一个以空字符终止的字符串的 集合，字符串保存了每个节的节名，如.text、 .data 等。有一个名为 e_shsrndx 的 ELF 文件头条目会指向.shstrtab 节， e_shstrndx 中保存 了.shstrtab 的偏移量。由于其保存了字符串表，因此节类型被标记为
SHT_STRTAB</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ctors_和_dtors_节"><code>.ctors</code> 和 <code>.dtors</code> 节</h4>
<div class="sidebarblock">
<div class="content">
<div class="title">.ctors 和 .dtors</div>
<div class="paragraph">
<p>这两个节保存了指向构造函数 和析构函数的函数指针，构造函数是在 main 函数执行之前需要执行的代码， 析构函数是在 main 函数之后需要执行的代码。</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_段的布局">段的布局</h3>
<div class="sect3">
<h4 id="_text段的布局如下">text段的布局如下</h4>
<div class="ulist">
<ul>
<li>
<p>[.text] : 程序代码</p>
</li>
<li>
<p>[.rodata] : 只读数据</p>
</li>
<li>
<p>[.hash] : 符号散列表</p>
</li>
<li>
<p>[.dynsym] : 共享目标文件符号数据</p>
</li>
<li>
<p>[.dynstr] : 共享目标文件符号名称</p>
</li>
<li>
<p>[.plt] : 过程链接表</p>
</li>
<li>
<p>[.rel.got] : G.O.T重定位数据</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_data段的布局">data段的布局</h4>
<div class="ulist">
<ul>
<li>
<p>[.data] : 全局初始化变量</p>
</li>
<li>
<p>[.dynamic] : 动态链接结构和对象</p>
</li>
<li>
<p>[.got.plt] : 全局偏移表</p>
</li>
<li>
<p>[.bss] : 全局未初始化变量</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_查看目标的段布局">查看目标的段布局</h4>
<div class="paragraph">
<p>test.o由 gcc -c 编译出来的 ET_REL文件(目标文件)，我们可以使用readelf -S 来查看该文件的节头</p>
</div>
<div class="listingblock">
<div class="title">readelf -S</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">andrew@andrew-G3-3590:/work/note_book/cmake-build-debug/src$ readelf -S  test.o
There are 12 section headers, starting at offset 0x258:

节头：
  [号] 名称              类型             地址              偏移量
       大小              全体大小          旗标   链接   信息   对齐
  [ 0]                   NULL             0000000000000000  00000000
       0000000000000000  0000000000000000           0     0     0
  [ 1] .text             PROGBITS         0000000000000000  00000040
       0000000000000010  0000000000000000  AX       0     0     1
  [ 2] .data             PROGBITS         0000000000000000  00000050
       0000000000000000  0000000000000000  WA       0     0     1
  [ 3] .bss              NOBITS           0000000000000000  00000050
       0000000000000000  0000000000000000  WA       0     0     1
  [ 4] .comment          PROGBITS         0000000000000000  00000050
       000000000000002c  0000000000000001  MS       0     0     1
  [ 5] .note.GNU-stack   PROGBITS         0000000000000000  0000007c
       0000000000000000  0000000000000000           0     0     1
  [ 6] .note.gnu.propert NOTE             0000000000000000  00000080
       0000000000000020  0000000000000000   A       0     0     8
  [ 7] .eh_frame         PROGBITS         0000000000000000  000000a0
       0000000000000038  0000000000000000   A       0     0     8
  [ 8] .rela.eh_frame    RELA             0000000000000000  000001d8
       0000000000000018  0000000000000018   I       9     7     8
  [ 9] .symtab           SYMTAB           0000000000000000  000000d8
       00000000000000f0  0000000000000018          10     9     8
  [10] .strtab           STRTAB           0000000000000000  000001c8
       0000000000000010  0000000000000000           0     0     1
  [11] .shstrtab         STRTAB           0000000000000000  000001f0
       0000000000000067  0000000000000000           0     0     1
Key to Flags:
  W (write), A (alloc), X (execute), M (merge), S (strings), I (info),
  L (link order), O (extra OS processing required), G (group), T (TLS),
  C (compressed), x (unknown), o (OS specific), E (exclude),
  l (large), p (processor specific)</code></pre>
</div>
</div>
<div class="paragraph">
<p>可以发现，可重定位文件(类型为ET_REL的ELF文件)中不存在程序头，因为.o文件会被链接到可执行文件中，但是不会被加载到内存中，所以无法使用readelf -l 来读取程序头的信息。不过有个例外的是linux内核模块LKM，LKM是ET_REL类型的文件，但是它会被直接加载进内核的内存中并自动的进行重定位</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_elf符号">ELF符号</h3>
<div class="paragraph">
<p>符号是对某些类型的数据或代码的符号引用，如printf会在动态符号表.dynsym中存在一个指向该函数的符号条目。在大多数的共享库和动态链接可执行文件中，存在两个符号表 .dynsym和.symtab</p>
</div>
<div class="paragraph">
<p><code>.dynsym</code> 保存了引用来自外部文件符号的全局符号，如printf库函数；`.dynsym`保存的符号是.symtab所保存符号的子集，.symtab中还保存了可执行文件的本地符号，如全局变量或者代码中定义的本地函数等，因此 .symtab中包成年了所有符号，而.dynsym只保存动态/全局符号</p>
</div>
<div class="paragraph">
<p>就存在这样一个问题：既然.symtab 中保存了.dynsym 中所有的符号，那么为什么还需要两个符号表呢？使用 readelf –S 命令查看可执行文件的输出， 可以看到一部分节被标记为了 A（ALLOC）、 WA（WRITE/ALLOC）或者 AX（ALLOC/EXEC）。 .dynsym 是被标记了 ALLOC 的，而.symtab则没有标记。</p>
</div>
<div class="paragraph">
<p>ALLOC 表示有该标记的节会在运行时分配并装载进入内存，而.symtab不是在运行时必需的，因此不会被装载到内存中。 .dynsym 保存的符号只能在运行时被解析，因此是运行时动态链接器所需要的唯一符号。 .dynsym 符号表对于动态链接可执行文件的执行来说是必需的，而.symtab 符号表只是用来进行调试和链接的，有时候为了节省空间，会将.symtab 符号表从生产二进制文
件中删掉，使用strip对可执行文件处理，主要的就是删除.symtab等符号信息</p>
</div>
</div>
<div class="sect2">
<h3 id="_elf_sym_符号表结构">Elf*_Sym 符号表结构</h3>
<div class="listingblock">
<div class="title">Elf*_Sym</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#080;font-weight:bold">typedef</span> <span style="color:#080;font-weight:bold">struct</span> {
   uint32_t      st_name;
   Elf32_Addr    st_value;
   uint32_t      st_size;
   <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">char</span> st_info;
   <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">char</span> st_other;
   uint16_t      st_shndx;
} Elf32_Sym;

<span style="color:#080;font-weight:bold">typedef</span> <span style="color:#080;font-weight:bold">struct</span> {
   uint32_t      st_name;
   <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">char</span> st_info;
   <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">char</span> st_other;
   uint16_t      st_shndx;
   Elf64_Addr    st_value;
   uint64_t      st_size;
} Elf64_Sym;</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_st_name"><code>st_name</code></h4>
<div class="paragraph">
<p>保存了指向符号表中字符串表(位于.synstr或者.strtab)的偏移地址，偏移地址存放着符号的名称，如printf</p>
</div>
</div>
<div class="sect3">
<h4 id="_st_value"><code>st_value</code></h4>
<div class="paragraph">
<p>用来存放符号的值(可能是地址或者偏移量)</p>
</div>
</div>
<div class="sect3">
<h4 id="_st_size"><code>st_size</code></h4>
<div class="paragraph">
<p>存放一个符号的大小，如全局函数指针的大小，具体占用字节和系统位数有关，如32位系统通常是4字节</p>
</div>
</div>
<div class="sect3">
<h4 id="_st_other"><code>st_other</code></h4>
<div class="paragraph">
<p>用来定义符号的可见性</p>
</div>
</div>
<div class="sect3">
<h4 id="_st_shndx"><code>st_shndx</code></h4>
<div class="paragraph">
<p>每个符号表条目的定义都于某些节对应，st_shndx变量保存了相关节头表的索引</p>
</div>
</div>
<div class="sect3">
<h4 id="_st_info"><code>st_info</code></h4>
<div class="paragraph">
<p>指定符号类型及其绑定属性，符号类型以STT开头，符号绑定以STB开头</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>符号类型</p>
<div class="ulist">
<ul>
<li>
<p>STT_NOTYPE : 符号类型未定义</p>
</li>
<li>
<p>STT_FUNC ： 表示符号与函数或者其他可执行代码关联</p>
</li>
<li>
<p>STT_OBJECT : 表示该符号与数据目标相关联</p>
</li>
</ul>
</div>
</li>
<li>
<p>符号绑定</p>
<div class="ulist">
<ul>
<li>
<p>STB_LOCAL : 本地符号在目标之外是不可见的，目标文件包含了符号的定义，如声明一个static函数</p>
</li>
<li>
<p>STB——GLOBAL : 全局符号对于所有要合并的目标文件都是可见的，一个全局符号在一个文件中进行定义之后，另外一个文件可以对这个符号进行引用。</p>
</li>
<li>
<p>STB——WEAK ： 语全局绑定类似，不过比STB_GLOBAL的优先级低，被标记为STB_WEAK的符号有可能会被同名的未标记为STB_WEAK的符号覆盖。</p>
</li>
</ul>
</div>
</li>
<li>
<p>对绑定和类型字段进行打包和解包的宏指令</p>
<div class="ulist">
<ul>
<li>
<p>ELF32_ST_BIND(info)或者ELF64_ST_BIND(info)：从st_info中提取一个绑定</p>
</li>
<li>
<p>ELF32_ST_TYPE(info)或者 ELF64_ST_TYPE(info)：从 st_info 值中提取类型。</p>
</li>
<li>
<p>ELF32_ST_TYPE(bind,type)或者 ELF64_ST_INFO(bind,type)： 将一个绑定和类型转换成 st_info 值</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>定义如下文件</p>
</div>
<div class="listingblock">
<div class="title">test.c</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#088;font-weight:bold">static</span> <span style="color:#088;font-weight:bold">inline</span> <span style="color:#088;font-weight:bold">void</span> foochu(){
    <span style="color:#777">/* Do nothing */</span>
}

<span style="color:#088;font-weight:bold">void</span> func1() {
    <span style="color:#777">/* Do nothing */</span>
}

_start()
{
    func1();
    foochu();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>并执行gcc -c test.c，之后使用readelf查看函数表条目：</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
注意这里是 -s 小s
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>readelf -s test.o  | egrep 'foochu|func1'</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">andrew@andrew-G3-3590:/work/note_book/cmake-build-debug/src$ readelf -s test.o  | egrep 'foochu|func1'
     5: 0000000000000000     7 FUNC    LOCAL  DEFAULT    1 foochu
    10: 0000000000000007    11 FUNC    GLOBAL DEFAULT    1 func1</code></pre>
</div>
</div>
<div class="paragraph">
<p>foochu是一个有本地符号绑定(STB_LOCAL)的函数(STT_FUNC)，因此foocho对于外界是不可见的，只有本文件中才能使用</p>
</div>
<div class="paragraph">
<p>这些符号给我们带来了许多便利，作为ELF文件的一部分，符号可用来链接、重定位、反汇编、调试等。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ftrace的使用">ftrace的使用</h3>
<div class="paragraph">
<p>ftrace是一个动态分析工具，当你手上没有源码时可以使用该工具对二进制文件进行分析</p>
</div>
<div class="paragraph">
<p>将以下源文件编译成二进制可执行文件test</p>
</div>
<div class="listingblock">
<div class="title">test.c</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#579">#include</span> <span style="color:#B44;font-weight:bold">&lt;stdio.h&gt;</span>

<span style="color:#088;font-weight:bold">void</span> func1(<span style="color:#0a8;font-weight:bold">int</span> a, <span style="color:#0a8;font-weight:bold">int</span> b, <span style="color:#0a8;font-weight:bold">int</span> c) {
    printf(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">%d %d %d</span><span style="color:#b0b">\n</span><span style="color:#710">&quot;</span></span>, a, b ,c);
}

<span style="color:#0a8;font-weight:bold">int</span> main(<span style="color:#088;font-weight:bold">void</span>) {
    func1(<span style="color:#00D">1</span>, <span style="color:#00D">2</span>, <span style="color:#00D">3</span>);
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
ftrace已经放到note_book的文档中，可以编译后直接使用
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>假设不知道上面的源码，使用ftrace对以上源码生成的二进制文件进行分析。</p>
</div>
<div class="paragraph">
<p>先看下ftrace的命令使用提示</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ ./ftrace -h
Usage: ./ftrace [-p &lt;pid&gt;] [-Sstve] &lt;prog&gt;
[-p] Trace by PID
[-t] Type detection of function args
[-s] Print string values
[-v] Verbose output
[-e] Misc. ELF info. (Symbols,Dependencies)
[-S] Show function calls with stripped symbols
[-C] Complete control flow analysis</code></pre>
</div>
</div>
<div class="paragraph">
<p>如果我们只想看函数的反汇编，不想被标准库中的加载的函数干扰可以在编译的时候加上 -nostdlib编译选项， <code>gcc -nostdlib test.c -o test</code> , 因为没有stdlib库，我们需要实现  _start接口来启动函数</p>
</div>
<div class="listingblock">
<div class="title">test2.c</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#088;font-weight:bold">void</span> foo(<span style="color:#088;font-weight:bold">void</span>) {

}
<span style="color:#0a8;font-weight:bold">int</span> _start()
{
    foo();
    __asm__(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">leave</span><span style="color:#710">&quot;</span></span>);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>对其进行反汇编：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp">andrew<span style="color:#F00;background-color:#FAA">@</span>andrew-G3-<span style="color:#00D">3590</span>:/work/note_book/cmake-build-debug/src$ objdump -d test

test<span style="color:#F00;background-color:#FAA">：</span>     <span style="color:#F00;background-color:#FAA">文</span><span style="color:#F00;background-color:#FAA">件</span><span style="color:#F00;background-color:#FAA">格</span><span style="color:#F00;background-color:#FAA">式</span> elf64-x86-<span style="color:#00D">64</span>


Disassembly of section .text:

<span style="color:#40E">0000000000001000</span> &lt;foo&gt;:
    <span style="color:#00D">1000</span>:        f3 <span style="color:#60E">0f</span> <span style="color:#60E">1</span>e fa                  endbr64
    <span style="color:#00D">1004</span>:        <span style="color:#00D">55</span>                           push   %rbp
    <span style="color:#00D">1005</span>:        <span style="color:#00D">48</span> <span style="color:#00D">89</span> e5                     mov    %rsp,%rbp
    <span style="color:#00D">1008</span>:        <span style="color:#00D">90</span>                           nop
    <span style="color:#00D">1009</span>:        <span style="color:#00D">5</span>d                           pop    %rbp
    <span style="color:#00D">100</span>a:        c3                           retq

<span style="color:#40E">000000000000100</span>b &lt;_start&gt;:
    <span style="color:#00D">100</span>b:        f3 <span style="color:#60E">0f</span> <span style="color:#60E">1</span>e fa                  endbr64
    <span style="color:#00D">10</span><span style="color:#60E">0f</span>:        <span style="color:#00D">55</span>                           push   %rbp
    <span style="color:#00D">1010</span>:        <span style="color:#00D">48</span> <span style="color:#00D">89</span> e5                     mov    %rsp,%rbp
    <span style="color:#00D">1013</span>:        e8 e8 ff ff ff               callq  <span style="color:#00D">1000</span> &lt;foo&gt;
    <span style="color:#00D">1018</span>:        c9                           leaveq
    <span style="color:#00D">1019</span>:        <span style="color:#00D">90</span>                           nop
    <span style="color:#00D">101</span>a:        <span style="color:#00D">5</span>d                           pop    %rbp
    <span style="color:#00D">101</span>b:        c3                           retq</code></pre>
</div>
</div>
<div class="paragraph">
<p>首地址会存放到基地址存放寄存器ebp/rbp中，通过首地址的正向偏移可以依次访问栈中的变量。</p>
</div>
</div>
<div class="sect2">
<h3 id="_elf重定位">ELF重定位</h3>
<div class="paragraph">
<p>重定位就是将符号定义和符号引用进行连接的过程。可重定位文件需要包 含描述如何修改节内容的相关信息，从而使得可执行文件和共享目标文件能够保存进程的程序镜像所需的正确信息。重定位条目就是我们上面说的相关信息。</p>
</div>
<div class="paragraph">
<p>重定位实际上是一种给二进制文件打补丁的机制，如果使用了动态链接器，可以使用重定位在内存中打热补丁。用于创建可执行文件和共享库的链接程序/bin/ld，需要某种类型的元数据来描述如
何对特定的指令进行修改。</p>
</div>
<div class="paragraph">
<p>假设要将两个目标文件链接到一起产生一个可执行文件。 obj1.o 文件中存放了调用函数 foo()的代码， 而函数 foo()是存放在目标文件 obj2.o 中的。链接程序会对 obj1.o 和 obj2.o 中的重定位记录进行分析并将这两个文件链接在一起产生一个可以独立运行的可执行程序。</p>
</div>
<div class="paragraph">
<p>符号引用会被解析成 符号定义，这是什么意思呢？目标文件是可重定位的代码，也就是说，目标
文件中的代码会被重定位到可执行文件的段中一个给定的地址。在进行重定位之前，无法确定 obj1.o 或者 obj2.o 中的符号和代码在内存中的位置，因此无法进行引用。只能在链接器确定了可执行文件的段中存放的指令或者符号的位置之后才能够进行修改。</p>
</div>
</div>
<div class="sect2">
<h3 id="_elf动态链接">ELF动态链接</h3>
<div class="paragraph">
<p>当一个程序被加载进内存时，动态连接器会把需要的共享库加载并绑定到该进程的地址空间中</p>
</div>
<div class="paragraph">
<p>共享库在被编译成到可执行文件中时是位置独立的，因此很容易被重定位到进程的地址空间中。</p>
</div>
<div class="paragraph">
<p>当一个共享库被加载进一个进城的地址空间中时，一定有指向其他共享库的重定位，动态连接器会修改可执行文件中的GOT(Global Offset Table, 全局偏移表，位于.got.plt节的数据段中)，动态连接器会使用解析好的共享库地址来修改GOT</p>
</div>
<div class="sect3">
<h4 id="_辅助向量">辅助向量</h4>
<div class="paragraph">
<p>通过系统调用sys_execve() 将程序加载到内存中时，对应的可执行文件会被映射到内存的地址空间，并为该进程的地址空间分配一个栈。这个栈会使用特定的方式向动态链接器传递信息。这种特定的对信息的设置和安排即为辅助向量(auxv)。在栈底存放了如下信息：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./image/image-2022-06-19-17-23-06-587.png" alt="auxv">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_了解pltgot">了解PLT/GOT</h4>
<div class="paragraph">
<p>我们调用共享库中的函数，需要到运行时才能解析这些函数调用，那么一定存在动态链接共享并解析共享函数地址的机制。</p>
</div>
<div class="paragraph">
<p>动态库采用默认的延迟链接方式时，不会在函数第一次调用时就对函数地址进行解析，延迟链接意味着动态链接器不会在程序第一次加载时就解析每一个函数，而是在调用时通过.plt和.got.plt节(分别对应各自的过程链接表和全局偏移表)来对函数进行解析。当然可以通过修改LD_BIND_NOW环境变量来将链接方式修改为严格加载，以便在程序加载的同时进行动态链接。之所以采用延迟链接，是因为延迟链接能够提高装载时的性能。不过有时候可能有一些不可预知的链接错误可能在程序运行一段时间后才能被发现。</p>
</div>
<div class="paragraph">
<p>值得注意的是，有些安全特性，如只读重定位，只能在严格链接的模式下使用，因为.plt.got
节是只读的。在动态链接器完成对.plt.got 的补充之后才能够进行只读重定位，因此必须使用严格链接</p>
</div>
</div>
<div class="sect3">
<h4 id="_如何读这些汇编语句">如何读这些汇编语句</h4>
<div class="paragraph">
<p>都是因为延迟链接的存在<br>
<code>1632:	e8 29 fb ff ff       	callq  1160 &lt;pthread_create@plt&gt;</code></p>
</div>
<div class="paragraph">
<p>地址由于低位在前，所以地址为： 0xfffffb29e8
1160是偏移地址
因为只有在实际调用时连接器才会对动态库函数中的函数进行解析，因此 函数pthread_create@plt 说的是pthread_create函数在.plt(过程链接表)偏移 1160的地方</p>
</div>
</div>
<div class="sect3">
<h4 id="_重温动态段">重温动态段</h4>
<div class="paragraph">
<p>动态连接器映射到内存中时，首先会处理自身的重定位，因为链接器本身就是一个共享库。接着会查看可执行文件的动态段并查找DT_NEEDED参数，该参数保存了指向所需要的共享库的字符串或路径名。当一个共享库被映射到内存中后，连接器会获取共享库的动态段，并将共享库的符号表添加到符号表链中，符号表链存储了所有映射到内存中的共享库符号表。</p>
</div>
<div class="paragraph">
<p>链接器为每个共享库生成一个link_map结构的条目，并将其存放到一个链表中：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#080;font-weight:bold">struct</span> link_map
{
    ElfW(Addr) l_addr; <span style="color:#777">/* Base address shared object is loaded at. */</span>
    <span style="color:#0a8;font-weight:bold">char</span> *l_name; <span style="color:#777">/* Absolute file name object was found in. */</span>
    ElfW(Dyn) *l_ld; <span style="color:#777">/* Dynamic section of the shared object. */</span>
    <span style="color:#080;font-weight:bold">struct</span> link_map *l_next, *l_prev; <span style="color:#777">/* Chain of loaded objects. */</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>链接器构建完依赖列表后，会挨个处理每个库的重定位（与本章之前讨论 的重定位过程类似），同时会补充每个共享库的 GOT。 延迟链接对共享库的PLT/GOT 仍然适用，因此，只有当一个函数真正被调用时，才会进行GOT重定位（R_386_JMP_SLOT 类型）</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_实现elf解析器">实现ELF解析器</h3>
<div class="paragraph">
<p>参见 src/elf_parser/elf_parser.c src/elf_parser/elf_parser32.c</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_linux进程追踪">Linux进程追踪</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ELF程序是完全映射到进程的地址空间的，因此可以附加到进程上，对ELF镜像进行解析或者修改，根直接修改磁盘上的实际ELF文件类似。区别是需要使用ptrace获取程序，在磁盘上可以使用open/mmap/read/|write 调用ELF文件</p>
</div>
<div class="paragraph">
<p>我们可以使用 ptrace 来控制程序的执行流程，这就意味着可以对程序“做各种手脚”，从内存病毒感染和病毒分析/检测，到用户级内存 rootkit、高级调试任务、热补丁，再到反编译</p>
</div>
<div class="sect2">
<h3 id="_ptrace的重要性">ptrace的重要性</h3>
<div class="paragraph">
<p>Linux中，ptrace(2)系统调用时获取进程地址空间的用户态方法。用户可以通过ptrace对进程进行修改、分析、反编译和调试。常见的分析工具，gdb、strace和ltrace都使用ptrace进行辅助。</p>
</div>
<div class="paragraph">
<p>程序员可以利用ptrace附加到一个进程上并修改内存，如代码注入，修改一些比较重要的数据结构，如共享库重定向所需要的GOT等</p>
</div>
</div>
<div class="sect2">
<h3 id="_ptrace_的请求">ptrace 的请求</h3>
<div class="paragraph">
<p>与其他系统调用一样ptrace系统调用也有一个libc的封装，因此在使用时需要引入ptrace.h 头文件，通过传入一个请求参数和一个进程ID来实现调用，</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#579">#include</span> <span style="color:#B44;font-weight:bold">&lt;synstr/ptrace.h&gt;</span>
<span style="color:#0a8;font-weight:bold">long</span> ptrace(<span style="color:#080;font-weight:bold">enum</span> _ptrace_request request, pid_t pid, <span style="color:#088;font-weight:bold">void</span>* addr, <span style="color:#088;font-weight:bold">void</span>* data);</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. ptrace的请求类型</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">请求参数</th>
<th class="tableblock halign-left valign-top">描述信息</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PTRACE_ATTACH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">附加到pid对应的进程上，使得pid对应的进程成为调用进城的tracee。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PTRACE_TRACEME</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">表明该进程会被父进程追踪。如果父进程不希望追踪该进程，就不要用这个请求参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PTRACE_PEEKTEXT<br>
PTRACE_PEEKDATA<br>
PTRACE_PEEKUSER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">这些参数允许追踪进程读取被追踪进程镜像的虚拟内存地址。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PTRACE_POKTEXT<br>
PTRACE_POKDATA<br>
PTRACE_POKUSER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">允许追踪进程修改被追踪进程镜像的任意地址</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PTRACE_GETREGS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">允许追踪进程获取被追踪进程的寄存器的一份副本，每个线程都有自己的寄存器集合</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PTRACE_SETREGS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">允许追踪进程为被追踪进程设置新的寄存器值，如将指令的指针值进行修改，指向shell代码</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PTRACE_CONT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">重启已经终止的被追踪进程，对应GDB调试的(C命令)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PTRACE_DETACH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">重启被追踪进程，并解除追踪，对应GDB调试的(quit命令)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PTRACE_SYSCALL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">重启被追踪进程，在下条系统调用开始/退出时终止该进程，可以通过这项参数来检查甚至修改系统调用参数，strace对这项参数应用非常多</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PTRACE_SINGLESTEP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">重启被追踪进程，并在下一条指令执行结束后将进程状态切换为终止状态，调试器通过该参数实现单步调试执行每条指令，用户可以通过该参数检查每条指令执行后寄存器的值和进程的状态，对应GDB调试的(s指令)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PTRACE_GETSIGINFO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">检索引起进程停止的信号信息，可以检索到siginfo_t结构的一份副本，进行分析或者修改并传回给被追踪进程</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PTRACE_SETSIGINFO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">设置信号信息，从追踪进程的地址数据中复制一份siginfo_t结构到被追踪进程中。这只针对从追踪进程传到被追踪进程的常规信号。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PTRACE_SETOPTIONS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">从数据设置ptrace的选项，数据可以理解为选项的位掩码。</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_进程寄存器状态和标记">进程寄存器状态和标记</h3>
<div class="paragraph">
<p>x86_64的user_regs_struct结构体保存了一些通用的寄存器、段寄存器、栈指针、指令指针、CPU标记和TLS寄存器</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp">&lt;sys/user.h&gt;
<span style="color:#080;font-weight:bold">struct</span> user_regs_struct
{
    __extension__ <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">int</span> r15;
    __extension__ <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">int</span> r14;
    __extension__ <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">int</span> r13;
    __extension__ <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">int</span> r12;
    __extension__ <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">int</span> rbp;
    __extension__ <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">int</span> rbx;
    __extension__ <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">int</span> r11;
    __extension__ <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">int</span> r10;
    __extension__ <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">int</span> r9;
    __extension__ <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">int</span> r8;
    __extension__ <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">int</span> rax;
    __extension__ <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">int</span> rcx;
    __extension__ <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">int</span> rdx;
    __extension__ <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">int</span> rsi;
    __extension__ <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">int</span> rdi;
    __extension__ <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">int</span> orig_rax;
    __extension__ <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">int</span> rip;
    __extension__ <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">int</span> cs;
    __
    extension__ <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">int</span> eflags;
    __extension__ <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">int</span> rsp;
    __extension__ <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">int</span> ss;
    __extension__ <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">int</span> fs_base;
    __extension__ <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">int</span> gs_base;
    __extension__ <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">int</span> ds;
    __extension__ <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">int</span> es;
    __extension__ <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">int</span> fs;
    __extension__ <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">long</span> <span style="color:#0a8;font-weight:bold">int</span> gs;
};</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">32位和64位的区别</div>
<div class="paragraph">
<p>32位linux中使用%gs作为线程本地存储(thread-local-storage, TLS)指针，从x86_64开始已经使用%fs寄存器替换%gs了。通过利用user_regs_struct中的寄存器，以及ptrace来读取进程的内存，可以获得对进程的完全控制权。</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_基于ptrace的调试器">基于ptrace的调试器</h3>
<div class="paragraph">
<p>基于以上的信息，我们知道可以通过利用user_regs_struct中的寄存器和ptrace来实现对程序的控制，我们使用这些方法来实现一个调试器，实现将程序在断点停止，并打印出寄存器的值和函数的参数。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#777">//</span>
<span style="color:#777">// Created by andrew on 2022/6/4.</span>
<span style="color:#777">//</span>

<span style="color:#579">#include</span> <span style="color:#B44;font-weight:bold">&lt;iostream&gt;</span>
<span style="color:#088;font-weight:bold">using</span> <span style="color:#080;font-weight:bold">namespace</span> std;
<span style="color:#088;font-weight:bold">void</span> Externally() {
    std::cout &lt;&lt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Externally</span><span style="color:#710">&quot;</span></span> &lt;&lt; std::endl;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>ELF可执行文件在内存中的结构除了数据段的变量、全局偏移表、函数指针和未初始化变量.bss节的变化外，剩余部分几乎跟磁盘上一样。这就意味着用于ELF文件感染的技术同样能用于进程运行时的内存感染。</p>
</div>
</div>
<div class="sect2">
<h3 id="_内存感染类型">内存感染类型</h3>
<div class="sidebarblock">
<div class="content">
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. 常见感染技术</caption>
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">感染技术</th>
<th class="tableblock halign-left valign-top">目标结果</th>
<th class="tableblock halign-left valign-top">寄存类型</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GOT感染</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">劫持共享库函数</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">进程内存或可执行文件</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">过程链接表(plt)感染</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">劫持共享库函数</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">进程内存或可执行文件</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.ctors/.dtors函数指针修改</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将控制流转向恶意代码</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">进程内存或可执行文件</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Function trampolines(函数蹦床)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">劫持任意函数</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">进程内存或可执行文件</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">共享库注入</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">插入恶意代码</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">进程内存或可执行文件</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">重定位代码注入</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">插入恶意代码</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">进程内存或可执行文件</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">直接修改text段</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">插入恶意代码</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">进程内存或可执行文件</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">进程占用(将整段程序注入地址空间)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">运行隐藏在现存进程中完全不同的可执行程序</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">进程内存</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_elf病毒技术_linuxsllunix技术">ELF病毒技术-(LinuxSll/Unix技术)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>每个可执行文件都有一个控制流，也就是执行路径。ELF病毒首要任务就是劫持控制流，暂时改变程序的执行路径来执行寄生代码。寄生代码同通常设置钩子来劫持函数，还会将自身的代码复制到没有被感染的程序中。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./image/image-2022-06-22-22-53-46-043.png" alt="image 2022 06 22 22 53 46 043">
</div>
</div>
<div class="paragraph">
<p>防止trace常用技术</p>
</div>
<div class="ulist">
<ul>
<li>
<p>PTRACE_TRACEME
利用特性一个进程同一时间内只能被一个进程追踪</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#088;font-weight:bold">void</span> anti_debug_check(<span style="color:#088;font-weight:bold">void</span>)
{
    <span style="color:#080;font-weight:bold">if</span> (ptrace(PTRACE_TRACEME, <span style="color:#00D">0</span>, <span style="color:#00D">0</span>, <span style="color:#00D">0</span>) &lt; <span style="color:#00D">0</span>) {
        printf(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">A debugger is attached, but not for long!</span><span style="color:#b0b">\n</span><span style="color:#710">&quot;</span></span>);
        kill(getpid());
        exit(<span style="color:#00D">0</span>);
    }
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>SIGTRAP</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>当进程被设置断点并执行到断点时，会出发该信号量</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#088;font-weight:bold">static</span> <span style="color:#0a8;font-weight:bold">int</span> caught = <span style="color:#00D">0</span>;
<span style="color:#0a8;font-weight:bold">int</span> sighandle(<span style="color:#0a8;font-weight:bold">int</span> sig)
{
    caught++;
}
<span style="color:#0a8;font-weight:bold">int</span> detect_debugger(<span style="color:#088;font-weight:bold">void</span>)
{
    __asm__ <span style="color:#088;font-weight:bold">volatile</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">int3</span><span style="color:#710">&quot;</span></span>);
    <span style="color:#080;font-weight:bold">if</span> (!caught) {
        printf(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">There is a debugger attached!</span><span style="color:#b0b">\n</span><span style="color:#710">&quot;</span></span>);
    <span style="color:#080;font-weight:bold">return</span> <span style="color:#00D">1</span>;
    }
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>/proc/self/status 技术</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp">andrew<span style="color:#F00;background-color:#FAA">@</span>andrew-G3-<span style="color:#00D">3590</span>:~$ head /proc/self/status
Name:        head
Umask:        <span style="color:#40E">0002</span>
State:        R (running)
Tgid:        <span style="color:#00D">20223</span>
Ngid:        <span style="color:#00D">0</span>
Pid:        <span style="color:#00D">20223</span>
PPid:        <span style="color:#00D">2498</span>
TracerPid:        <span style="color:#00D">0</span>     <span style="color:#777">// 0表示没有人追踪</span>
Uid:        <span style="color:#00D">1000</span>        <span style="color:#00D">1000</span>        <span style="color:#00D">1000</span>        <span style="color:#00D">1000</span>
Gid:        <span style="color:#00D">1000</span>        <span style="color:#00D">1000</span>        <span style="color:#00D">1000</span>        <span style="color:#00D">1000</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>每个程序都有自己的 /proc/self/status，可以打开查看TracerPid的值如果为0说明没有人追踪</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_linux二进制保护">Linux二进制保护</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="./image/image-2022-06-22-23-21-08-603.png" alt="image 2022 06 22 23 21 08 603">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_认识可执行程序">认识可执行程序</h2>
<div class="sectionbody">
<div class="paragraph">
<p>一个源文件在生成可执行程序的过程中地址需要经过以下几个主要步骤。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./image/diagram-classes.png" alt="diagram classes" width="144" height="293">
</div>
</div>
<div class="paragraph">
<p>源文件在经过编译器处理之后会生成可重定位目标文件，也就是我们常见的.o文件，经过链接器处理之后，会将多个.o文件处理成可执行文件。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>可从定位目标</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>.o</code> 称为可重定位目标，包含二进制代码和数据，其形式可以和其他目标进行合并，创建一个可执行目标文件</p>
</div>
<div class="paragraph">
<p>因为.o文件也是ELF文件的一种，所以我么可以使用readelf -h 来查看.o文件的elf头数据</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ readelf -h main.o
ELF 头：
  Magic：   7f 45 4c 46 02 01 01 00 00 00 00 00 00 00 00 00
  类别:                              ELF64
  数据:                              2 补码，小端序 (little endian)
  Version:                           1 (current)
  OS/ABI:                            UNIX - System V
  ABI 版本:                          0
  类型:                              REL (可重定位文件)
  系统架构:                          Advanced Micro Devices X86-64
  版本:                              0x1
  入口点地址：               0x0
  程序头起点：          0 (bytes into file)
  Start of section headers:          960 (bytes into file)
  标志：             0x0
  Size of this header:               64 (bytes)
  Size of program headers:           0 (bytes)
  Number of program headers:         0
  Size of section headers:           64 (bytes)
  Number of section headers:         14
  Section header string table index: 13</code></pre>
</div>
</div>
<div class="paragraph">
<p>通过与文件头结构体对比</p>
</div>
<div class="listingblock">
<div class="title">Elf64_Ehdr</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#080;font-weight:bold">typedef</span> <span style="color:#080;font-weight:bold">struct</span>
{
  <span style="color:#0a8;font-weight:bold">unsigned</span> <span style="color:#0a8;font-weight:bold">char</span>        e_ident[EI_NIDENT];        <span style="color:#777">/* Magic number and other info */</span>
  Elf64_Half        e_type;                        <span style="color:#777">/* Object file type */</span>
  Elf64_Half        e_machine;                <span style="color:#777">/* Architecture */</span>
  Elf64_Word        e_version;                <span style="color:#777">/* Object file version */</span>
  Elf64_Addr        e_entry;                <span style="color:#777">/* Entry point virtual address */</span>
  Elf64_Off        e_phoff;                <span style="color:#777">/* Program header table file offset */</span>
  Elf64_Off        e_shoff;                <span style="color:#777">/* Section header table file offset */</span>
  Elf64_Word        e_flags;                <span style="color:#777">/* Processor-specific flags */</span>
  Elf64_Half        e_ehsize;                <span style="color:#777">/* ELF header size in bytes */</span>
  Elf64_Half        e_phentsize;                <span style="color:#777">/* Program header table entry size */</span>
  Elf64_Half        e_phnum;                <span style="color:#777">/* Program header table entry count */</span>
  Elf64_Half        e_shentsize;                <span style="color:#777">/* Section header table entry size */</span>
  Elf64_Half        e_shnum;                <span style="color:#777">/* Section header table entry count */</span>
  Elf64_Half        e_shstrndx;                <span style="color:#777">/* Section header string table index */</span>
} Elf64_Ehdr;</code></pre>
</div>
</div>
<div class="paragraph">
<p>首先看到的是Magic魔法数字，这些数字的大小由宏定义  <code>#define EI_NIDENT (16)</code> 来进行限定，Magic放在ELF文件的头部的16字节，其中各个字节的含义如下：</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Magic</th>
<th class="tableblock halign-left valign-top">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x7f</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ELF文件</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">45</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'E'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4c</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'L'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">46</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'F'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">02</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">文件类型，1:32位文件，2:64位文件</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">01</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">大小端：1是小端，2是大端</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">01</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">版本</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">系统类型</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ABI 版本</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Byte index of padding bytes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Other</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">保留</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">类型</th>
<th class="tableblock halign-left valign-top">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">e_type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">文件类型，常见的有可重定位文件，可执行文件，共享文件等</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">e_machine</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">主机类型</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">e_version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">版本</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">e_entry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">程序虚拟地址入口</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">e_phoff</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">程序段地址偏移量</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">e_shoff</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">程序节地址偏移量</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">e_flags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">程序特殊标记</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">e_ehsize</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ELF文件头大小</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">e_phentsize</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">段头表大小</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">e_phnum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">段表个数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">e_shentsize</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">节表的大小，所有的节头大小都是一致的</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">e_shnum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">节头个数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">e_shstrndx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">节头的字符串表索引</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>通过readelf -S 我们可以根据地址的偏移来大致给出可重定位文件的组成组成如下：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./image/image-2022-06-23-15-12-52-519.png" alt="可重定位目标">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>可执行文件</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>我们将同样的源码编译成可执行程序，然后使用readelf -h查看可执行文件的的头：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ readelf -h a.out
ELF 头：
  Magic：   7f 45 4c 46 02 01 01 00 00 00 00 00 00 00 00 00
  类别:                              ELF64
  数据:                              2 补码，小端序 (little endian)
  Version:                           1 (current)
  OS/ABI:                            UNIX - System V
  ABI 版本:                          0
  类型:                              DYN (共享目标文件)
  系统架构:                          Advanced Micro Devices X86-64
  版本:                              0x1
  入口点地址：               0x1060
  程序头起点：          64 (bytes into file)
  Start of section headers:          14744 (bytes into file)
  标志：             0x0
  Size of this header:               64 (bytes)
  Size of program headers:           56 (bytes)
  Number of program headers:         13
  Size of section headers:           64 (bytes)
  Number of section headers:         31
  Section header string table index: 30</code></pre>
</div>
</div>
<div class="paragraph">
<p>使用readelf -S 来看一下可执行文件的段组成大致如下：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./image/image-2022-06-23-15-16-10-005.png" alt="可执行文件">
</div>
</div>
<hr>
<div class="paragraph">
<p>通过对可重定位文件和可执行文件的头部对比，我们可以看出主要有如下几点不同：</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. 差异分析</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">索引</th>
<th class="tableblock halign-left valign-top">元素</th>
<th class="tableblock halign-left valign-top">差异分析</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">入口点地址</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">因为可重定位目标文件不是可执行程序，因此没有程序入口点地址</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">程序头起点</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">程序头起点，也就是段头表的起点，同样可重定位目标不存在</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">程序段头表</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">可重定位目标不存在程序段头，因此为0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">程序段头数量</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">可重定位目标0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">节表相关</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">因为可重定位目标不需要考虑执行，因此还会比可执行程序少去.interp等于连接器等其他相关的节</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
上面的过程都是通过官方的工具才看到的，那么官方工具会不会欺骗我们，真实的可执行程序真的是readelf输出的这样来组成的吗？
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>我们可以仿照readelf给出的信息自己来解析一下ELF文件，来从一个切实存在的ELF文件来了解ELF文件的构成</p>
</div>
<div class="listingblock">
<div class="title"><a href="https://github.com/zzu-andrew/note_book/src/elf_parser/elf_parser.h" class="bare">https://github.com/zzu-andrew/note_book/src/elf_parser/elf_parser.h</a></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#777">// 1. 将可执行文件加载到内存中</span>
mmap_res = ::mmap(<span style="color:#069">nullptr</span>, program_length_, PROT_READ, MAP_PRIVATE, fd_, <span style="color:#00D">0</span>);
<span style="color:#080;font-weight:bold">if</span> (mmap_res == MAP_FAILED)
{
    ERROR_EXIT(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">mmap</span><span style="color:#710">&quot;</span></span>);
}

mmap_program_ = <span style="color:#080;font-weight:bold">static_cast</span>&lt;std::uint8_t *&gt;(mmap_res);
<span style="color:#777">// 2. 取出文件头</span>
file_header = <span style="color:#080;font-weight:bold">reinterpret_cast</span>&lt;Elf64_Ehdr *&gt;(mmap_program_);
<span style="color:#777">// 3. 取出段头和表头</span>
<span style="color:#088;font-weight:bold">const</span> Elf64_Ehdr *file_header;
<span style="color:#088;font-weight:bold">const</span> Elf64_Shdr *section_table;
<span style="color:#088;font-weight:bold">const</span> <span style="color:#0a8;font-weight:bold">char</span> *section_string_table;
size_t section_string_table_index;
Elf64_Xword section_number;

file_header = <span style="color:#080;font-weight:bold">reinterpret_cast</span>&lt;Elf64_Ehdr *&gt;(mmap_program_);
section_table = <span style="color:#080;font-weight:bold">reinterpret_cast</span>&lt;Elf64_Shdr *&gt;(mmap_program_ + file_header-&gt;e_shoff);

<span style="color:#777">// e_shstrndx = 35</span>
section_string_table_index = file_header-&gt;e_shstrndx == SHN_XINDEX ?
                             <span style="color:#080;font-weight:bold">reinterpret_cast</span>&lt;Elf64_Shdr *&gt;(&amp;mmap_program_[file_header-&gt;e_shoff])-&gt;sh_link :
                             file_header-&gt;e_shstrndx;
section_string_table = <span style="color:#080;font-weight:bold">reinterpret_cast</span>&lt;<span style="color:#0a8;font-weight:bold">char</span> *&gt;(&amp;mmap_program_[section_table[section_string_table_index].sh_offset]);

section_number = <span style="color:#080;font-weight:bold">reinterpret_cast</span>&lt;Elf64_Shdr *&gt;(&amp;mmap_program_[file_header-&gt;e_shoff])-&gt;sh_size;</code></pre>
</div>
</div>
<div class="paragraph">
<p>经过以上步骤之后将文件头的信息打印如下:</p>
</div>
<div class="listingblock">
<div class="title">readelf -h</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$3 = {e_ident = &quot;\177ELF\002\001\001\000\000\000\000\000\000\000\000&quot;, e_type = 3, e_machine = 62, e_version = 1, e_entry = 4512, e_phoff = 64, e_shoff = 36184, e_flags = 0, e_ehsize = 64, e_phentsize = 56,
e_phnum = 13, e_shentsize = 64, e_shnum = 36, e_shstrndx = 35}</code></pre>
</div>
</div>
<div class="paragraph">
<p>通过读取打开文件的大小，得出整个可执行文件的大小为： fileSize = 38488
通过文件头我们可以知道：<br>
ELF头大小为： e_ehsize = 64<br>
段头表偏移为： e_phoff = 64 大小为 e_phentsize = 56， 个数为 e_phnum = 13<br>
节头表偏移地址为 ：e_shoff = 36184, 大小为 e_shentsize = 64, 个数为 e_shnum = 36<br>
节地址偏移： 36184<br></p>
</div>
<div class="paragraph">
<p>ELF头在头部， 我们直接将指向头部的指针强转成 <code>Elf64_Ehdr</code> 之后，取出的数据完全和对应的文件相符，因此可以看出ELF头放在文件的头部确实和readelf输出的一样。</p>
</div>
<div class="paragraph">
<p>然后按照偏移量来计算，段头部应该紧跟ELF头部之后，因此，段的位置应该在头部指针向后偏移64位的地方通过查看e_phoff的值确实是64</p>
</div>
<div class="paragraph">
<p>那么我们在来验证一下尾部是否是节头表存放的地方，通过ELF头我们知道，节头的大小为64, 节头的偏移位置为36184, 节头个数为36，按照上图来说，节头在最后的部分，那么肯定会存在fileSize - e_shoff = e_shentsize * e_shnum这种等式，否则就说明节头没有把ELF可执行程序的尾部填满。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#00D">38488</span> - <span style="color:#00D">36184</span> = <span style="color:#00D">2304</span> = <span style="color:#00D">36</span> * <span style="color:#00D">64</span>(<span style="color:#F00;background-color:#FAA">节</span><span style="color:#F00;background-color:#FAA">头</span><span style="color:#F00;background-color:#FAA">长</span><span style="color:#F00;background-color:#FAA">度</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>经过计算，整个ELF文件的尾部确实都是节头填充的。
其他节占用的验证大家可以在原有程序的基础上进行验证，这里就不一一进行验证了</p>
</div>
<div class="sect2">
<h3 id="_pie_no_pie">-pie &amp;&amp; -no-pie</h3>
<div class="paragraph">
<p>细心的读者有可能会发现，我上面使用readelf -h读出可执行文件的类型都显示为共享类型，这个是因为我的系统是ubuntu导致的，现在很多Ubuntu系统的默认编译器都会在编译程序是默认添加 <code>-pie</code> 选项而这个选项会导致生成的可执行程序被标记为共享类型</p>
</div>
<div class="paragraph">
<p>pie(Position-Independent-Executable)能用来创建介于共享库和通常可执行程序之间的程序，是一种能像共享库一样可重分配地址的程序。</p>
</div>
<div class="paragraph">
<p>PIE最早由RedHat的⼈实现，他在连接器上增加了-pie选项，这样使⽤-fPIE编译的对象就能通过链接器得到位置⽆关可执⾏程序。</p>
</div>
<div class="paragraph">
<p>标准的可执⾏程序需要固定的地址，并且只有被装载到这个地址时，程序才能正确执⾏。PIE能使程序像共享库⼀样在主存任何位置装载，这需要将程序编译成位置⽆关，并链接为ELF共享对象。</p>
</div>
<div class="paragraph">
<p>引⼊PIE的原因是让程序能装载在随机的地址，通常情况下，内核都在固定的地址运⾏，如果能改⽤位置⽆关，那攻击者就很难借助系统中的可执⾏码实施攻击了。类似缓冲区溢出之类的攻击将⽆法实施。⽽且这种安全提升的代价很⼩。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_utils">utils</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_asciidocumentation">AsciiDocumentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>AsciiDoc是一种文本文档格式(轻量级标记语言)，常用来编写文档、文章、电子书、幻灯片、网页、手册页和博客等</p>
</div>
<div class="ulist">
<ul>
<li>
<p>AsciiDoc文件可以翻译成HTML、PDF、EPUB、手册等</p>
</li>
<li>
<p>高度可配置，用户可以定制和扩展源文件和后端输出标记</p>
</li>
<li>
<p>软件免费，GNU通用许可协议</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_文档头">文档头</h3>
<div class="paragraph">
<p>可以包含：文档头、作者、修订行、自定义属性等</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="asciidoc">= 文档头
Doc Writer &lt;doc.writer@asciidoctor.org&gt;
v1.0, 2018-04-11
:toc:
:imagesdir: assets/images
:homepage: https://asciidoctor.org My document provides...</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_标题">标题</h3>
<div class="paragraph">
<p>标题以=开头，需要注意以下事项：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>需要靠左侧顶格</p>
</li>
<li>
<p>0级标题(默认时)只能有一个0级标题，并且它必须处于文档头部</p>
</li>
<li>
<p>=的数目和HTML中输出的标题级别相匹配</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="asciidoc">= 文档标题 (0级) =
== 段落标题 (1级) ==
=== 段落标题 (2级) ===
==== 段落标题 (3级) ====
===== 段落标题 (4级) =====</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_段落">段落</h3>
<div class="paragraph">
<p>段落不需要任何特殊的标记，段落只需要是一段连续的一行或者多行，但是开始一个新的段落需要用一个空行进行分隔。</p>
</div>
<div class="paragraph">
<p>文档的大部分内容是段落文本，因此asciidoc不需要任何特殊的标记或者属性来指定段落内容</p>
</div>
<div class="sect3">
<h4 id="_换行">换行</h4>
<div class="paragraph">
<p>在asciidoc中，相邻的连续文本形成段落元素，若要在另一个元素之后开始新的段落，则插入空行，然后继续键入内容即可。</p>
</div>
<div class="paragraph">
<p>因为AsciiDoc转换文档时，相邻的文本行会被合并为单个段落，这意味着可以包装段落文本或将每个句子或短语放在单独的行上，输出时是不会出现换行的。<br>
如果希望保留段落中的换行符，可以使用加号( +)或者hardbreaks属性，这样会导致每一行之后增加可见的换行符标记</p>
</div>
<div class="paragraph">
<p>添加换行属性</p>
</div>
<div class="paragraph">
<p>第一行<br>
第二行</p>
</div>
<div class="paragraph">
<p>通过将 hardbreaks 属性添加到文档头部，可以在整个文档中保留换行符。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="asciidoc">:hardbreaks:
......
Rubies are red,
Topazes are blue.</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_文字段落">文字段落</h4>
<div class="paragraph">
<p>至少一个空格开头的文字为文字段落，文字段落所有行必须是相邻的，文字段落显示为预格式化文本，文本以固定宽度字体显示，空格和换行符都会被保留下来</p>
</div>
</div>
<div class="sect3">
<h4 id="_提示段落">提示段落</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">标签</th>
<th class="tableblock halign-left valign-top">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOTE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">注释</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TIP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">提示</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WARNING</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">警告</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IMPORTANT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">重要</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CAUTION</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">注意</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
New data
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
提示
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">title</div>
<div class="paragraph">
<p>提示</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>当想对一一整块内容使用警告时，可以将标签设置为块上属性</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Feeding the Werewolves</div>
<div class="paragraph">
<p>While werewolves are hardy community members, keep in mind the following dietary concerns:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>They are allergic to cinnamon.</p>
</li>
<li>
<p>More than two glasses of orange juice in 24 hours makes them howl in harmony with alarms and sirens. . Celery makes them sad.</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>可以使用icons指定图标(部分编辑器上有效)</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
What lovely war.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>使用caption参数定义经过标题返回文本信息，</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="特殊提示"></i>
</td>
<td class="content">
What lovely war.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>可以使用note-caption替换NOTE字符，同理可以替换其他的提示字符</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="?"></i>
</td>
<td class="content">
It&#8217;s possible to use Unicode glyphs as admonition icons.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_引文段落">引文段落</h4>
<div class="ulist">
<ul>
<li>
<p>将引文样式应用到段落上，将更改字体大小</p>
</li>
<li>
<p>自动化格式文本</p>
</li>
<li>
<p>可以采用(.)的方式设置引文角色和分配到段落上</p>
</li>
</ul>
</div>
<div class="paragraph lead">
<p>This text will be styled as a lead paragraph (i.e., larger font).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_块结构">块结构</h3>
<div class="paragraph">
<p>任何块都可以有一个标题，位于块的上方，块标题是以一个点开始的文本行</p>
</div>
<div class="paragraph">
<p>文本块是以空格开头或使用文字块界定符(&#8230;&#8203;.)界定的区块</p>
</div>
<div class="literalblock">
<div class="title">标题</div>
<div class="content">
<pre>Lazarus: Where is the *defensive operations manual*?

Computer: Calculating ...
Can not locate object that you are not authorized to know exists.
Would you like to ask another question?

Lazarus: Did the werewolves tell you to say that?

Computer: Calculating ...</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>当希望整个文本是文本块，并且不希望有缩进时，可在元素的顶部设置文本属性</p>
</li>
</ul>
</div>
<div class="literalblock">
<div class="content">
<pre>error: The requested operation returned error: 1954 Forbidden search for defensive operations manual
absolutely fatal: operation initiation lost in the dodecahedron of doom would you like to die again? y/n</pre>
</div>
</div>
<div class="sect3">
<h4 id="_注释块">注释块</h4>
<div class="paragraph">
<p>注释块不会输出到目标文件，行注释以两个//开头，常用于分隔元素，如两个相邻的列表</p>
</div>
<div class="ulist">
<ul>
<li>
<p>块注释</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_列表块">列表块</h4>
<div class="ulist">
<ul>
<li>
<p>可用于计算机输出和文件列表，常用于程序代码</p>
</li>
<li>
<p>特殊字符不替换</p>
</li>
<li>
<p>包含分隔的列表块有四个连字符(----)组成的行包围</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>This is an example of a paragraph styled with `listing`.
Notice that the monospace markup is preserved in the output.</pre>
</div>
</div>
<div class="listingblock">
<div class="title">app.rb</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">require <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">sinatra</span><span style="color:#710">'</span></span>

get <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">/hi</span><span style="color:#710">'</span></span> <span style="color:#080;font-weight:bold">do</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Hello World!</span><span style="color:#710">&quot;</span></span> <span style="color:#080;font-weight:bold">end</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>列表块支持自定义语法替换</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;dependency&gt;</span>
<span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>org.asciidoctor<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>
<span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>asciidoctor-java-integration<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>
<span style="color:#070;font-weight:bold">&lt;version&gt;</span>1.5.6.1<span style="color:#070;font-weight:bold">&lt;/version&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>可添加nowrap支持滚动，增加之后如果一行上内容显示不全可通过滚动条查看</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="cpp"><span style="color:#579">#ifndef</span> NODE_BOOKS_MEMORY_MANAGEMENT_H <span style="color:#579">#define</span> NODE_BOOKS_MEMORY_MANAGEMENT_H <span style="color:#579">#include</span> <span style="color:#B44;font-weight:bold">&lt;iostream&gt;</span> <span style="color:#579">#include</span> <span style="color:#B44;font-weight:bold">&quot;Interface.h&quot;</span> <span style="color:#088;font-weight:bold">using</span> <span style="color:#080;font-weight:bold">namespace</span> std;<span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">MemoryManagement</span> { <span style="color:#088;font-weight:bold">public</span>: <span style="color:#088;font-weight:bold">private</span>:    uint32_t m_count{}; };
<span style="color:#579">#endif</span> <span style="color:#777">//NODE_BOOKS_MEMORY_MANAGEMENT_H</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>可以结合代码注释给代码块添加标注</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">require <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">sinatra</span><span style="color:#710">'</span></span> <i class="conum" data-value="1"></i><b>(1)</b>

get <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">/hi</span><span style="color:#710">'</span></span> <span style="color:#080;font-weight:bold">do</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Hello World!</span><span style="color:#710">&quot;</span></span> <i class="conum" data-value="3"></i><b>(3)</b>
<span style="color:#080;font-weight:bold">end</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Library import</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>URL mapping</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>HTTP response body</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>注释会自动生成序号注释，每个注释占用一行</p>
</div>
<div class="ulist">
<ul>
<li>
<p>可以直接引入源码文件</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#777">//</span>
<span style="color:#777">// Created by andrew on 2022/6/4.</span>
<span style="color:#777">//</span>

<span style="color:#579">#include</span> <span style="color:#B44;font-weight:bold">&lt;iostream&gt;</span>
<span style="color:#088;font-weight:bold">using</span> <span style="color:#080;font-weight:bold">namespace</span> std;
<span style="color:#088;font-weight:bold">void</span> Externally() {
    std::cout &lt;&lt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Externally</span><span style="color:#710">&quot;</span></span> &lt;&lt; std::endl;
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>也可以只引入源码的指定行</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#088;font-weight:bold">void</span> Externally() {
    std::cout &lt;&lt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Externally</span><span style="color:#710">&quot;</span></span> &lt;&lt; std::endl;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_侧边栏块">侧边栏块</h4>
<div class="paragraph">
<p>侧边栏块以****为行围住，侧边栏有底色有边框显示</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">AsciiDoc history</div>
<div class="paragraph">
<p>AsciiDoc was first released in Nov 2002 by Stuart Rackham.
It was designed from the start to be a shorthand syntax
for producing professional documents like DocBook and LaTeX.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_匿名小框框">匿名小框框</h4>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>匿名框框</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_引用文本块">引用文本块</h4>
<div class="paragraph">
<p>引用文本块，左上角会有一个双引号提示符</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>QuoteBlock</p>
</div>
</blockquote>
</div>
<div class="ulist">
<ul>
<li>
<p>负责引用块</p>
</li>
</ul>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Four score and seven years ago our fathers brought forth
on this continent a new nation&#8230;&#8203;</p>
</div>
</blockquote>
<div class="attribution">
&#8212; Abraham Lincoln<br>
<cite>Address delivered at the dedication of the Cemetery at Gettysburg</cite>
</div>
</div>
<div class="quoteblock">
<blockquote>
A person who never made a mistake never tried anything new.
</blockquote>
<div class="attribution">
&#8212; Albert Einstein
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>A person who never made a mistake never tried anything new.</p>
</div>
</blockquote>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>If you don&#8217;t know where you are going, any road will get you there.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; Charles Lutwidge Dodgson<br>
<cite>Mathematician and author, also known as <a href="http://en.wikipedia.org/wiki/Lewis_Carroll">Lewis Carroll</a></cite>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>缩写引用块</p>
</li>
</ul>
</div>
<div class="quoteblock">
<blockquote>
I hold it that a little rebellion now and then is a good thing,
and as necessary in the political world as storms in the physical.
</blockquote>
<div class="attribution">
&#8212; Thomas Jefferson<br>
<cite>Papers of Thomas Jefferson: Volume 11</cite>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>案例文本块</p>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="title">Example 1. app</div>
<div class="content">
<div class="paragraph">
<p>ExampleBlock</p>
</div>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>当然上面的这些可以混合嵌套使用</p>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="title">Example 2. Sample document</div>
<div class="content">
<div class="paragraph">
<p>Here&#8217;s a sample AsciiDoc document:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>= Title of Document
Doc Writer
:toc:

This guide provides...</pre>
</div>
</div>
<div class="paragraph">
<p>The document header is useful, but not required.</p>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="NOTE"></i>
</td>
<td class="content">
<div class="paragraph">
<p>An admonition block may contain complex content.</p>
</div>
<div class="ulist">
<div class="title">A list</div>
<ul>
<li>
<p>one</p>
</li>
<li>
<p>two</p>
</li>
<li>
<p>three</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Another paragraph.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>开放块</p>
</li>
</ul>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>An open block can be an anonymous container,
or it can masquerade as any other block.</p>
</div>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>puts &quot;I'm a source block!&quot;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_列表">列表</h3>
<div class="ulist">
<ul>
<li>
<p>通过在第一个列表之后插入一个空白行和一行注释可以将两个相邻列表分开</p>
</li>
<li>
<p>约定使用(//)作为注释向其他作者提供一个提示，也用来分隔列表</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>所有开头的列表，无论你是按照哪个字幕写的开头，都会自动进行升序排序，并且自动对标识符进行升序，书写的人不用担心标识符信息不符</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">1.   阿拉伯数字标注的列表项目.
a.   小写字母标注的列表项目.
F.   大写字母标注的列表项目.
iii) 小写罗马数字标注的列表项目.
IX)  大写罗马数字标注的列表项目.</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>大</p>
</li>
<li>
<p>小</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_无序列表">无序列表</h4>
<div class="ulist">
<ul>
<li>
<p>List item.</p>
<div class="ulist">
<ul>
<li>
<p>List item.</p>
<div class="ulist">
<ul>
<li>
<p>List item.</p>
<div class="ulist">
<ul>
<li>
<p>List item. <strong><strong>* List item. </strong></strong>** List item.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_自定义列表">自定义列表</h4>
<div class="paragraph">
<p>字母或者数字开始，1-4个冒号或两个分号结束</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Operating Systems</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Linux</dt>
<dd>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Fedora</p>
<div class="ulist">
<ul>
<li>
<p>Desktop</p>
</li>
</ul>
</div>
</li>
<li>
<p>Ubuntu</p>
<div class="ulist">
<ul>
<li>
<p>Desktop</p>
</li>
<li>
<p>Server</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">BSD</dt>
<dd>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>FreeBSD</p>
</li>
<li>
<p>NetBSD</p>
</li>
</ol>
</div>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1">Cloud Providers</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">PaaS</dt>
<dd>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>OpenShift</p>
</li>
<li>
<p>CloudBees</p>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">IaaS</dt>
<dd>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Amazon EC2</p>
</li>
<li>
<p>Rackspace</p>
</li>
</ol>
</div>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_问答列表">问答列表</h4>
<div class="qlist qanda">
<ol>
<li>
<p><em>What is Asciidoctor?</em></p>
<p>An implementation of the AsciiDoc processor in Ruby.</p>
</li>
<li>
<p><em>What is the answer to the Ultimate Question?</em></p>
<p>42</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_复选框列表">复选框列表</h4>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> checked</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> also checked</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> not checked</p>
</li>
<li>
<p>normal list item</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_单行标记">单行标记</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">first term</dt>
<dd>
<p>definition of first term</p>
</dd>
<dt class="hdlist1">second term</dt>
<dd>
<p>definition of second term</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_多行标记">多行标记</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">first term</dt>
<dd>
<p>definition of<br>
first term</p>
</dd>
<dt class="hdlist1">second term</dt>
<dd>
<p>definition of second term</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_术语列表">术语列表</h4>
<div class="paragraph">
<p>用于关键术语的解释</p>
</div>
<div class="dlist glossary">
<dl>
<dt>术语1</dt>
<dd>
<p>解释1.</p>
</dd>
<dt>术语2</dt>
<dd>
<p>解释2.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_文本格式">文本格式</h3>
<div class="sect3">
<h4 id="_粗体">粗体</h4>
<div class="paragraph">
<p><strong>bold</strong> &amp; <strong>data</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="_斜体">斜体</h4>
<div class="paragraph">
<p><em>italic phrase</em> &amp; <em>character</em></p>
</div>
</div>
<div class="sect3">
<h4 id="_等宽字体">等宽字体</h4>
<div class="paragraph">
<p><code>monospace phrase</code> &amp; <code>char data</code></p>
</div>
<div class="paragraph">
<p>如果在等宽字体中用到({name})这样的格式需要直译，那么可以使用(和)或者使用转义符号(\)或者(`)进行转义</p>
</div>
<div class="paragraph">
<p>You can reference the value of a document attribute using the syntax <code>{name}</code>, where <code>{name}</code>  <code>{name}</code> is the attribute name.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>当然可以将这些字体进行混合使用</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code><strong><em>monospace bold italic phrase</em></strong></code> &amp; <code><strong><em>char</em></strong></code>acter<code><strong><em>s</em></strong></code></p>
</div>
</div>
<div class="sect3">
<h4 id="_标记字体颜色黄色高亮">标记字体颜色(黄色高亮)</h4>
<div class="paragraph">
<p>Werewolves are allergic to <mark>cassia cinnamon</mark>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_字体缩小">字体缩小</h4>
<div class="paragraph">
<p>Did the werewolves read the <span class="small">small print</span>?</p>
</div>
</div>
<div class="sect3">
<h4 id="_字体扩大">字体扩大</h4>
<div class="paragraph">
<p><span class="big">O</span>nce upon an infinite loop.</p>
</div>
</div>
<div class="sect3">
<h4 id="_添加删除线">添加删除线</h4>
<div class="paragraph">
<p>We need <span class="line-through">ten</span> make that twenty VMs.</p>
</div>
</div>
<div class="sect3">
<h4 id="_添加下划线">添加下划线</h4>
<div class="paragraph">
<p>Where did all the <span class="underline">cores</span> run off to?</p>
</div>
</div>
<div class="sect3">
<h4 id="_添加上标">添加上标</h4>
<div class="paragraph">
<p><sup>super</sup>script phrase</p>
</div>
</div>
<div class="sect3">
<h4 id="_添加下标">添加下标</h4>
<div class="paragraph">
<p><sub>sub</sub>script phrase</p>
</div>
</div>
<div class="sect3">
<h4 id="_文本替换">文本替换</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">符号</th>
<th class="tableblock halign-left valign-top">显示</th>
<th class="tableblock halign-left valign-top">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(C)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#169;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">版权</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(TM)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8482;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">商标</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(R)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#174;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">注册商标</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">右箭头</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8592;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">左箭头</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">=&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8658;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">右双箭头</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8656;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">左双箭头</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&amp;#x278a;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x278a;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">数字</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">--</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">破折号</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_添加水平线">添加水平线</h4>
<div class="paragraph">
<p>三个以上的单引号，会添加水平线</p>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="_添加分隔符">添加分隔符</h4>
<div class="paragraph">
<p>分隔符会将段落文本之间使用空行分隔开</p>
</div>
<div class="paragraph">
<p>分开</p>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>符号</p>
</div>
</div>
<div class="sect3">
<h4 id="_添加外部超链接">添加外部超链接</h4>
<div class="paragraph">
<p><a href="https://asciidoctor.org" class="bare">https://asciidoctor.org</a> - automatic!</p>
</div>
<div class="paragraph">
<p><a href="https://asciidoctor.org">Asciidoctor</a></p>
</div>
<div class="paragraph">
<p><a href="https://github.com/asciidoctor">Asciidoctor @ <strong>GitHub</strong></a></p>
</div>
<div class="ulist">
<ul>
<li>
<p>具有空格和特殊字符的可以按照下述方式添加</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="https://example.org/?q=[a b]">URL with special characters</a></p>
</div>
<div class="paragraph">
<p><a href="https://example.org/?q=%5Ba%20b%5D">URL with special characters</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_本地路径">本地路径</h4>
<div class="ulist">
<ul>
<li>
<p>绝对路径</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="/home/works/dataSize/details.pdf">test data</a></p>
</div>
<div class="ulist">
<ul>
<li>
<p>相对路径</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="index.html">Docs</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_电子邮件">电子邮件</h4>
<div class="paragraph">
<p><a href="mailto:devel@discuss.arquillian.org">devel@discuss.arquillian.org</a></p>
</div>
<div class="paragraph">
<p><a href="mailto:devel@discuss.arquillian.org">Discuss Arquillian</a></p>
</div>
<div class="paragraph">
<p><a href="mailto:devel-join@discuss.arquillian.org?subject=Subscribe+me&amp;body=I+want+to+join%21">Subscribe</a></p>
</div>
<div class="paragraph">
<p><a href="irc://irc.freenode.org/#fedora" class="bare">irc://irc.freenode.org/#fedora</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_锚点">锚点</h4>
<div class="paragraph">
<p>添加锚点之后，在连接锚点的地方可以通过点击跳转到指定地方</p>
</div>
<div class="paragraph">
<p>锚点：<a id="A88"></a>
链接：<a href="#A88">chapter titles</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_图片">图片</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">image::sunset.jpg[]

image::sunset.jpg[Sunset]

.A mountain sunset
[#img-sunset]
[caption=&quot;Figure 1: &quot;,link=https://www.flickr.com/photos/javh/5448336655]
image::sunset.jpg[Sunset,300,200]
image::https://asciidoctor.org/images/octocat.jpg[GitHub mascot]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_视频">视频</h4>
<div class="ulist">
<ul>
<li>
<p>添加块视频</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">video::video_file.mp4[]

video::video_file.mp4[width=640, start=60, end=140, options=autoplay]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_文本行中添加源码等宽字体">文本行中添加源码(等宽字体)</h4>
<div class="paragraph">
<p>Reference code like <code>types</code> or <code>methods</code> inline.</p>
</div>
<div class="paragraph">
<p>Output literal monospace text such as <code>{backtick}</code> by
enclosing the text in pluses, then again in backticks.</p>
</div>
</div>
<div class="sect3">
<h4 id="_文档目录">文档目录</h4>
<div class="paragraph">
<p>使用 <code>:toc:</code> 添加文档目录</p>
</div>
</div>
<div class="sect3">
<h4 id="_添加脚注">添加脚注</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">A statement.footnote:[Clarification about this statement.] A bold statement!footnoteref:[disclaimer,Opinions are my own.] Another bold statement.footnoteref:[disclaimer]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_表格">表格</h3>
<div class="ulist">
<ul>
<li>
<p>除非制定了cols属性，否则列的数量等于块分隔符之间第一行(非空)上的单元格分隔符字符的数量</p>
</li>
<li>
<p>当空白符跟随第一个非空行时，第一行的单元格将升迁为表标题</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Table Name</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header 2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column 1, row 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column 2, row 1</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Table Name</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Header 1</th>
<th class="tableblock halign-left valign-top">Header 2</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column 1, row 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column 2, row 1</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>cols属性中(*)是重复运算符，意味着在列的其余部分重复列规范</p>
</li>
<li>
<p>当头的单元格没有在一行上定义时，必须使用cols属性设置表中的列数，使用%header选项或者.=header属性将第一行提升为表头</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Cols Test</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Header 1</th>
<th class="tableblock halign-left valign-top">Header 2</th>
<th class="tableblock halign-left valign-top">Header 3</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column 1, row 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column 2, row 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column 3, row 1</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. Cols Test</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Header 1</th>
<th class="tableblock halign-left valign-top">Header 2</th>
<th class="tableblock halign-left valign-top">Header 3</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column 1, row 1</p></td>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Column 2, row 1</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 23.8095%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 19.0477%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">函数名称</th>
<th class="tableblock halign-left valign-top">GetData</th>
<th class="tableblock halign-left valign-top">版本</th>
<th class="tableblock halign-left valign-top">V1.0.0.0</th>
<th class="tableblock halign-left valign-top">修改日期</th>
<th class="tableblock halign-left valign-top">2022-06-24</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数说明</p></td>
<td class="tableblock halign-left valign-top" colspan="5"><p class="tableblock">获取数据</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="6"><p class="tableblock">入参说明</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="6"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="6"><p class="tableblock">出参说明</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="6"><div class="content"><div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#579">#include</span> <span style="color:#B44;font-weight:bold">&lt;iostream&gt;</span>
<span style="color:#0a8;font-weight:bold">int</span> GetData(<span style="color:#0a8;font-weight:bold">int</span> idx) {
    <span style="color:#080;font-weight:bold">return</span> GetData(idx
)}</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>包含其他标签的表
加a之后会将表格中的数据按照asciidoc语法格式化</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 22.2222%;">
<col style="width: 22.2222%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Firefox</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Browser</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Mozilla Firefox is an open-source web browser.</p>
</div>
<div class="paragraph">
<p>It&#8217;s designed for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>standards compliance</p>
</li>
<li>
<p>performance</p>
</li>
<li>
<p>portability</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="http://getfirefox.com">Get Firefox</a>!</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>引入csv表格</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">name</th>
<th class="tableblock halign-left valign-top">row</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Animation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Alice</th>
<th class="tableblock halign-left valign-top">Bob</th>
<th class="tableblock halign-left valign-top">Gen</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">id</th>
<th class="tableblock halign-left valign-top">name</th>
<th class="tableblock halign-left valign-top">age</th>
<th class="tableblock halign-left valign-top">sex</th>
<th class="tableblock halign-left valign-top">demo</th>
<th class="tableblock halign-left valign-top">test</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Roberta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">39</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">M</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">love</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11111111111</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oliver</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">M</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">live</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">zhong guo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shayna</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">love</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">wu han</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>引入DSV表格</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Artist</th>
<th class="tableblock halign-left valign-top">Track</th>
<th class="tableblock halign-left valign-top">Genre</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Robyn</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indestructable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dance</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>带格式化、对其和合并单元的表</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all" style="width: 25%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>1</em></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>2</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>4</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><em>5</em></p></td>
<td class="tableblock halign-center valign-middle" colspan="2" rowspan="2"><p class="tableblock"><code>6</code></p></td>
<td class="tableblock halign-left valign-bottom" rowspan="3"><p class="tableblock"><code>7</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><em>8</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>9</em></p></td>
<td class="tableblock halign-right valign-top" colspan="2"><p class="tableblock"><code>10</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_图表">图表</h3>
<div class="sect3">
<h4 id="_气泡图">气泡图</h4>
<div class="openblock chart">
<div class="content">
<div class="paragraph">
<p>1,  4
3,  10
6,  15
9,  8
12, 5</p>
</div>
</div>
</div>
<div class="openblock chart">
<div class="content">
<div class="paragraph">
<p>1,  4
3,  10
6,  15
9,  8
12, 5</p>
</div>
<div class="paragraph">
<p>1,  20
3,  15
6,  13
9,  12
12, 14</p>
</div>
</div>
</div>
<div class="openblock chart">
<div class="content">
<div class="paragraph">
<p>1,  3
2,  5
6,  8
9,  8
12, 5
18, 7</p>
</div>
<div class="paragraph">
<p>1,  18
2,  15
6,  13
9,  12
12, 14
19, 14</p>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="https://blog.csdn.net/somken/article/details/108262323" class="bare">https://blog.csdn.net/somken/article/details/108262323</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_属性">属性</h3>
<div class="ulist">
<ul>
<li>
<p>可以使用双冒号来定义属性</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p>计数器属性的使用</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Parts</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Part Id</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PX-1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description of PX-1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PX-2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description of PX-2</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>使用platuml绘图</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="./image/diagram-classes.png" alt="diagram classes" width="264" height="284">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>ascii图表</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="./image/diag-4e4c29a31c95b37a6c750071298f6084.png" alt="Diagram" width="540" height="280">
</div>
</div>
<div class="sect3">
<h4 id="_转义直译">转义直译</h4>
<div class="ulist">
<ul>
<li>
<p>`\`可以将转义字符进行直译</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>*Stars* is not rendered as bold text.
The asterisks around the word are preserved.</p>
</div>
<div class="paragraph">
<p>{author} is not resolved to the author name. The curly brackets around the word are preserved. <code>A--Z</code> connects A to Z in monospace using two dashes. The dashes are not replaced by an em dash. [[Word]] is not interpreted as an anchor. The double brackets around the word are preserved. [[[Word]]] is not interpreted as a bibliography anchor. The triple brackets around the word are preserved. In these cases, the backslash character is automatically removed.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>(+)号也能对转义字符进行直译</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>Text inside {plus} characters</code> is not formatted.
However, special characters like &lt; and &gt; are still escaped.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>pass宏直译</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><u>underline me</u> is also underlined.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>(+)直译</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><u>underline me</u> is underlined.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="NOTE"></i>
</td>
<td class="content">
另外asciidoc兼容markdown语法
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://blog.csdn.net/weixin_34409741/article/details/94689288">asciidoc使用说明</a></p>
</div>
<hr>
<div class="paragraph">
<p>A statement .<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup> A bold statement!<sup class="footnote" id="_footnote_disclaimer">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup> Another bold statement.<sup class="footnoteref">[<a class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_操作系统">操作系统</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_系统知识">系统知识</h3>
<div class="sect3">
<h4 id="_什么是大小端">什么是大小端</h4>
<div class="paragraph">
<p>小端(Little-endian)：就是低字节排放在内存的的低地址端，高位字节排放到内存的高地址端<br>
大端(Big-endian)：就是高位字节排放在内存的低地址端，低字节排放到内存的高地址端</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
1)大端模式：
低地址 ----------------&#8594; 高地址
0x12  |  0x34  |  0x56  |  0x78
2)小端模式：
低地址 -----------------&#8594; 高地址
0x78  |  0x56  |  0x34  |  0x12
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>判断系统大小端</p>
</div>
<div class="listingblock">
<div class="title">BgiEndian.cpp</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span style="color:#0a8;font-weight:bold">bool</span> BigEndian()
{
    <span style="color:#080;font-weight:bold">union</span>
    {
        uint16_t a;
        <span style="color:#0a8;font-weight:bold">char</span> b;
    }num;
    num.a = <span style="color:#02b">0x1234</span>;
    <span style="color:#080;font-weight:bold">if</span>(num.b == <span style="color:#02b">0x12</span>)
    {
        <span style="color:#080;font-weight:bold">return</span> <span style="color:#069">true</span>;
    }
    <span style="color:#080;font-weight:bold">return</span> <span style="color:#069">false</span>;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_文件io">文件IO</h3>

</div>
<div class="sect2">
<h3 id="_进程间通信">进程间通信</h3>

</div>
<div class="sect2">
<h3 id="_线程间同步">线程间同步</h3>

</div>
<div class="sect2">
<h3 id="_守护进程">守护进程</h3>

</div>
<div class="sect2">
<h3 id="_内存管理">内存管理</h3>
<div class="paragraph">
<p>Linux内存管理，内存寻址，虚拟内存，内存调页算法，任务调度算法</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Linux虚拟内存实现需要6种机制支持：地址映射机制、内存分配回收机制、缓存和刷新机制、请求页机制、交换机机制、内存共享机制
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>内存管理程序通过映射机制(MMU)可以把用户程序的逻辑地址映射到物理地址。当用户程序运行时，如果发现程序中的虚拟地址没有对应的物理地址，就发出请求页的请求，如果有空闲的内存可供分配，就请求分配内存(此处需要内存的分配和回收机制)，并把使用的物理页记录到缓存中(使用了缓存机制)。如果没有足够的内存可供分配，那么就调用交换机制，腾出一部分内存。另外在地址映射中要通过TLB(翻译后缓存储器)来寻找物理页；交换机知中也要用到交换缓存，并且把物理页内容交换到文件中，也要修改页表来映射文件地址。</p>
</div>
</div>
<div class="sect2">
<h3 id="_信号">信号</h3>
<div class="paragraph">
<p>常见的信号？ 操作系统如何将一个信号通知到进程</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">andrew@andrew-G3-3590:~$ kill -l
 1) SIGHUP         2) SIGINT         3) SIGQUIT         4) SIGILL         5) SIGTRAP
 6) SIGABRT         7) SIGBUS         8) SIGFPE         9) SIGKILL        10) SIGUSR1
11) SIGSEGV        12) SIGUSR2        13) SIGPIPE        14) SIGALRM        15) SIGTERM
16) SIGSTKFLT        17) SIGCHLD        18) SIGCONT        19) SIGSTOP        20) SIGTSTP
21) SIGTTIN        22) SIGTTOU        23) SIGURG        24) SIGXCPU        25) SIGXFSZ
26) SIGVTALRM        27) SIGPROF        28) SIGWINCH        29) SIGIO        30) SIGPWR
31) SIGSYS        34) SIGRTMIN        35) SIGRTMIN+1        36) SIGRTMIN+2        37) SIGRTMIN+3
38) SIGRTMIN+4        39) SIGRTMIN+5        40) SIGRTMIN+6        41) SIGRTMIN+7        42) SIGRTMIN+8
43) SIGRTMIN+9        44) SIGRTMIN+10        45) SIGRTMIN+11        46) SIGRTMIN+12        47) SIGRTMIN+13
48) SIGRTMIN+14        49) SIGRTMIN+15        50) SIGRTMAX-14        51) SIGRTMAX-13        52) SIGRTMAX-12
53) SIGRTMAX-11        54) SIGRTMAX-10        55) SIGRTMAX-9        56) SIGRTMAX-8        57) SIGRTMAX-7
58) SIGRTMAX-6        59) SIGRTMAX-5        60) SIGRTMAX-4        61) SIGRTMAX-3        62) SIGRTMAX-2
63) SIGRTMAX-1        64) SIGRTMAX</code></pre>
</div>
</div>
<div class="paragraph">
<p>信号是进程之间传递消息的一种方法，信号全称为软中断信号，当然有诶有些人称作软中断<br>
进程间可以通过调用系统调用kill发送信号，
<span class="red">几种常见的信号</span>：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">SIGHUP 1 A 终端挂起或者控制进程终止
SIGINT 2 A 键盘中断（如break键被按下）
SIGQUIT 3 C 键盘的退出键被按下
SIGILL 4 C 非法指令
SIGABRT 6 C 由abort(3)发出的退出指令
SIGFPE 8 C 浮点异常
SIGKILL 9 AEF Kill信号
SIGSEGV 11 C 无效的内存引用
SIGPIPE 13 A 管道破裂: 写一个没有读端口的管道</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_在线编译工具">在线编译工具</h3>
<div class="paragraph">
<p><a href="https://www.godbolt.org">在线编译工具</a></p>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Clarification about this statement.
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. Opinions are my own.
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-06-20 22:57:38 +0800
</div>
</div>
</body>
</html>