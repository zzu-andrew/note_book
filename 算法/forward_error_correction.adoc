:toc:

// 保证所有的目录层级都可以正常显示图片
:path: 算法/
:imagesdir: ../image/

// 只有book调用的时候才会走到这里
ifdef::rootpath[]
:imagesdir: {rootpath}{path}{imagesdir}
endif::rootpath[]

== Forward Error Correction


=== Error Detection vs. Forward Error Correction

常见的错误检测

- Parity(奇偶校验)
- Checksum(校验和)
- Cyclic redundancy check(CRC)

但是这些检测只能用来发现错误，并不能用于校正错误，一旦发生了错误只能使用重传进行解决。

但是在一些系统中是无法进行重传的

1. HDTV中连接是单向通讯
2. BER(Bit Error Rate)非常高的连接中, stem:[\mathrm{BER}=\frac{\text { Number of bits received incorrectly }}{\text { Total number of bits transmitted }}]
3. 如果连接中具有高时延的场景，比如卫星通讯中。

FEC是通过发送冗余数据来实现发现错误时通过用于数据来修正异常数据，或者解决数据丢失的情况。

=== 码率（Code Rate）

在通信和信息理论中，特别是涉及信道编码时，是指信息数据比特数与总传输比特数（即编码后的比特数）之比。用公式表示就是 \( r = \frac{k}{n} \)，其中 \(k\) 是未经编码的信息比特数，\(n\) 是编码之后的比特数（即码字的长度）。码率 \(r\) 总是小于或等于 1。

例如，在一个 (5,2) 的块编码中，每两个信息比特被编码成五个比特的码字，因此码率为 \( r = \frac{2}{5} \)。

在编码时，接受者和发送者都共同持有同一份码表(codebook)，码表就是将数据从k-bit的数据编码为n-bit编码数据的表。

|===
|Data Block |Codeword

|00 |00000
|01 |00111
|10 |11001
|11 |11110

|===

码率反映了编码方案的效率。码率越高，意味着添加的冗余越少，信息传输的效率越高，但错误检测和纠正的能力可能也会随之减弱。相反，码率越低，意味着添加的冗余越多，虽然传输效率下降，但是可以提高错误检测和纠正的能力。

在实际应用中，码率的选择取决于通信链路的特性。例如，在高噪声环境下，可能需要较低的码率以增强抗噪能力；而在带宽受限的情况下，则可能需要较高的码率以提高传输效率。

码率的概念对于评估和设计前向纠错（FEC, Forward Error Correction）编码方案非常重要。FEC 在无线通信、卫星通信等领域有着广泛的应用，尤其是在那些重传请求不可行或延迟很高的环境中。通过增加适当的冗余，FEC 允许接收端在不需要重发的情况下检测并纠正错误。

=== 汉明距离（Hamming Distance）

衡量两个等长字符串之间的差异的一种方式。具体来说，它是指两个字符串对应位置的不同字符的数量。汉明距离在许多领域都有应用，如信息论、编码理论、密码学、生物信息学等。

不仅可以检测错误，还可以定位并纠正单比特错误

设有两个等长的字符串 \(x\) 和 \(y\)，它们的长度为 \(n\)。汉明距离 \(d_H(x, y)\) 被定义为 \(x\) 和 \(y\) 中不同字符的数目。

假设我们有两个二进制字符串 \(x = 1011101\) 和 \(y = 1001001\)，我们可以逐位比较这两个字符串：

1. 第1位：1 vs 1 → 相同
2. 第2位：0 vs 0 → 相同
3. 第3位：1 vs 0 → 不同
4. 第4位：1 vs 1 → 相同
5. 第5位：1 vs 0 → 不同
6. 第6位：0 vs 0 → 相同
7. 第7位：1 vs 1 → 相同

因此，这两个字符串之间的汉明距离为 \(d_H(x, y) = 2\)。

.应用
****
- **编码理论**：在编码理论中，汉明距离用于衡量错误检测和纠正的能力。码字之间的最小汉明距离决定了它可以纠正或检测的最大错误数量。
- **密码学**：汉明距离有时也被用来分析加密算法的安全性。
- **生物信息学**：在基因组研究中，汉明距离可以用来比较DNA序列，找出突变点。
****

错误纠正的能力和汉明距离是直接相关的，一个n-bit位的码字\(v_1\)和\(v_2\)定义如下：

[stem]
++++
d(v_(1),v_(2))=sum_(ℓ=0)^(n-1)XOR(v_(1)(ℓ),v_(2)(ℓ))
++++

汉明距离最小值定义：
stem:[d_(min)=min_(i!=j)d(v_(i),v_(j))]

在前向纠错（FEC，Forward Error Correction）编码中，汉明距离（Hamming Distance）和冗余（Redundancy）是两个非常重要的概念，它们各自在错误检测与纠正中发挥着不同的作用。

汉明距离（Hamming Distance）

汉明距离是衡量两个等长字符串之间差异的一种度量方式。具体而言，汉明距离是指两个字符串中不同位的数量。在块编码（block coding）中，汉明距离直接关系到错误纠正的能力。例如，两个码字 \(v_1\) 和 \(v_2\) 的汉明距离 \(d(v_1, v_2)\) 定义为两个码字中异或结果为 1 的位数。*汉明距离越大，码字间区分度越高，纠错能力越强*。

最小汉明距离 \(d_{\text{min}}\) 是指所有码字之间汉明距离的最小值。对于某些正整数 \(t_c\)，如果一个码字的最小汉明距离满足 \(d_{\text{min}} \geq 2t_c + 1\)，那么该码字可以纠正最多 \(t_c\) 个比特错误。换言之，可纠正的错误数量 \(t_c\) 由公式 \(t_c = \left\lfloor \frac{d_{\text{min}} - 1}{2} \right\rfloor\) 给出，其中 \(\left\lfloor x \right\rfloor\) 表示向下取整。

每个Codeword的检测错误能力计算方式如下：

stem:[t_(d)=d_(min)-1]

- 如果d~min~等于错误比特数e，可能有无法检测的错误，因为其检测能力是 (d~min~ - 1)
- 如果d~min~大于错误比特数e，可以检测到错误，但是不能保证纠正错误，比如错误比特数为e= d~min~ - 1，而此时纠错能力为   \(t_c = \left\lfloor \frac{d_{\text{min}} - 1}{2} \right\rfloor\)

冗余（Redundancy）

冗余指的是在编码过程中引入的额外信息量，它是相对于原始信息量的一个比例。冗余可以用来提高编码的鲁棒性，使得接收端能够在接收到错误的码字后仍然能够恢复出原始数据。冗余的程度可以用冗余度来描述，冗余度定义为 \( \text{redundancy} = \frac{n - k}{k} \)，其中 \(n\) 是码字的长度，\(k\) 是原始数据的长度。码率 \(r\) 定义为 \(r = \frac{k}{n}\)，码率越接近 1，表示冗余越少；反之，码率越小，表示冗余越多。


汉明距离与冗余的关系

在设计编码方案时，通常希望 \(d_{\text{min}}\) 越大越好，这样可以提高错误检测和纠正的能力。然而，增加 \(d_{\text{min}}\) 往往意味着需要增加冗余，即需要更多的比特来表示每个数据比特。因此，存在一个内在的权衡：提高 \(d_{\text{min}}\) 以增强错误检测和纠正能力的同时，必须接受更高的冗余（更低的码率）。

示例

假设我们有一个 (5,2) 的块码，其中 \(n=5\)，\(k=2\)，码率为 \(r=\frac{2}{5}\)。这个码的冗余度为 \(\frac{5-2}{2} = \frac{3}{2}\)。码字之间的汉明距离为：

- \(d(v_1, v_2) = 3\)
- \(d(v_1, v_3) = 3\)
- \(d(v_1, v_4) = 4\)
- \(d(v_2, v_3) = 4\)
- \(d(v_2, v_4) = 3\)
- \(d(v_3, v_4) = 3\)

因此，\(d_{\text{min}} = 3\)，这意味着这个码可以纠正最多 \(t_c = \left\lfloor \frac{3 - 1}{2} \right\rfloor = 1\) 个比特错误。

.总结
****
汉明距离和冗余是编码方案设计中两个关键的因素。汉明距离决定了编码的错误检测和纠正能力，而冗余则体现了为了实现这一能力所付出的成本。在实际应用中，设计者需要在提高 \(d_{\text{min}}\) 和保持较小的冗余之间做出权衡。
****

=== Decoding invalid Codewords

.Decoding invalid Codewords
image::network/image-2024-10-09-13-05-14-005.png[]

假设我们要传输一个00，使用(5,2)块码表编码，我们将会得到00000，通过channel进行传输时，接收端得到的结果是00100(一个bit在传输过程中发生错误)，接收端应该怎么办？或者说接收端应该怎样根据现有条件校正错误的数据？

为了对错误数据进行校正，就需要用到汉明距离了，当收到一个错误的数据，我们取出码表，然后找出码表中和异常数据的最小汉明距离。

.Our (5, 2)example code again
|===
|Data Block |Codeword

|00 |v~1~ = 00000
|01 |v~2~ = 00111
|10 |v~3~ = 11001
|11 |v~4~ = 11110
|===

我们接收的事 \(00100\)，和码表的汉明距离计算如下：

- \(d(00100, v_1) = 1\)
- \(d(00100, v_2) = 2\)
- \(d(00100, v_3) = 4\)
- \(d(00100, v_3) = 3\)

校正数据的过程就是取最小汉明距离的过程，这里计算结果显示，v~1~ 和错误数据的汉明距离最小，因此选用v~1~的 Data block作为正确的数据。

因此这个 (5,2) 的编码表，能够保证错一位的数据总是被正确的校正回来。








